---
name: ë‚´í…ŒìŠ¤í„°-í†µí•©
description: API/Supertest ê¸°ë°˜ í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ìë™ ìˆ˜ì •
---

# ë‚´í…ŒìŠ¤í„°-í†µí•© (Integration Test)

## ê°œìš”
Supertestë¥¼ ì‚¬ìš©í•˜ì—¬ API í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³ ,
ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.

## íŠ¹ì§•
| í•­ëª© | ê°’ |
|------|-----|
| ë¸Œë¼ìš°ì € | âŒ ë¶ˆí•„ìš” |
| Google ë¡œê·¸ì¸ | âŒ API í† í° ì‚¬ìš© |
| ìŠ¤í¬ë¦°ìƒ· | âŒ ì—†ìŒ |
| ì†ë„ | ë¹ ë¦„ (10~60ì´ˆ) |
| ë„êµ¬ | Supertest, Jest |
| ëŒ€ìƒ | API ì—”ë“œí¬ì¸íŠ¸, DB ì—°ë™ |

## í™˜ê²½ë³„ ì„¤ì •

### ë¡œì»¬ í™˜ê²½
```
baseURL: http://localhost:3090
timeout: 10ì´ˆ
```

### Oracle í™˜ê²½
```
baseURL: https://wbhub.oracle.cloud
timeout: 30ì´ˆ
retry: 3íšŒ
```

## ì‘ì—… ìˆœì„œ

### 1ë‹¨ê³„: í™˜ê²½ ì„¤ì •
```
â”œâ”€ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ (ë¡œì»¬/ì˜¤ë¼í´)
â”œâ”€ API baseURL ì„¤ì •
â””â”€ JWT í…ŒìŠ¤íŠ¸ í† í° ìƒì„± (API ì§ì ‘ í˜¸ì¶œ)
```

### 2ë‹¨ê³„: API í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ë¸Œë¼ìš°ì € ì—†ìŒ)
```
í”Œë¡œìš° ì˜ˆì‹œ: HubManager â†’ SalesHub

1. HubManager API í˜¸ì¶œ
   â”œâ”€ POST /api/auth/test-login (í† í° ë°œê¸‰)
   â”œâ”€ GET /api/hubs (Hub ëª©ë¡ ì¡°íšŒ)
   â””â”€ ì‘ë‹µ ê²€ì¦ (status, body)

2. SalesHub ì—°ë™ API í˜¸ì¶œ
   â”œâ”€ POST /api/hub-token (Hub í† í° ìƒì„±)
   â”œâ”€ GET /api/sales/dashboard (SalesHub API)
   â””â”€ ì‘ë‹µ ê²€ì¦
```

### 3ë‹¨ê³„: ê²°ê³¼ ë¶„ì„
- ì„±ê³µ/ì‹¤íŒ¨ API í˜¸ì¶œ ë¶„ë¥˜
- ì‹¤íŒ¨ ì›ì¸ ë¶„ì„:
  - 401/403: ì¸ì¦ ì˜¤ë¥˜
  - 404: ì—”ë“œí¬ì¸íŠ¸ ì—†ìŒ
  - 500: ì„œë²„ ì˜¤ë¥˜
  - Timeout: ë„¤íŠ¸ì›Œí¬/ì„±ëŠ¥ ë¬¸ì œ
- ì‘ë‹µ ìŠ¤í‚¤ë§ˆ ê²€ì¦

### 4ë‹¨ê³„: ë°˜ë³µ ë””ë²„ê¹… (ìµœëŒ€ 3íšŒ)
```
âŒ ì‹¤íŒ¨ ì‹œ:
  â”œâ”€ API ì‘ë‹µ ë¡œê·¸ ë¶„ì„
  â”œâ”€ ê´€ë ¨ ë¼ìš°í„°/ì»¨íŠ¸ë¡¤ëŸ¬ ì½”ë“œ í™•ì¸
  â”œâ”€ ğŸ”§ ì½”ë“œ ìˆ˜ì • ì ìš©
  â”œâ”€ â³ 2ì´ˆ ëŒ€ê¸°
  â””â”€ ğŸ” ì¬ì‹œë„

âŒ ì¬ì‹œë„ 1 ì‹¤íŒ¨:
  â”œâ”€ ë‹¤ë¥¸ ì ‘ê·¼ë²•ìœ¼ë¡œ ìˆ˜ì •
  â”œâ”€ â³ 4ì´ˆ ëŒ€ê¸°
  â””â”€ ğŸ” ì¬ì‹œë„

âŒ ì¬ì‹œë„ 2 ì‹¤íŒ¨:
  â”œâ”€ ê·¼ë³¸ ì›ì¸ ë¶„ì„ (DB, í™˜ê²½ë³€ìˆ˜ ë“±)
  â”œâ”€ â³ 6ì´ˆ ëŒ€ê¸°
  â””â”€ ğŸ” ìµœì¢… ì¬ì‹œë„

âŒ ìµœì¢… ì‹¤íŒ¨ â†’ ìƒì„¸ ë¦¬í¬íŠ¸ ìƒì„±
âœ… ì„±ê³µ â†’ ìˆ˜ì •ì‚¬í•­ ê¸°ë¡ + ë¦¬í¬íŠ¸ ìƒì„±
```

### 5ë‹¨ê³„: ë¦¬í¬íŠ¸ ìƒì„±
```
í…œí”Œë¦¿: /home/peterchung/WHCommon/TestReport/í…ŒìŠ¤íŠ¸-ë¦¬í¬íŠ¸-í…œí”Œë¦¿.md

ë¦¬í¬íŠ¸ êµ¬ì¡°:
â”œâ”€ ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½ (í…Œì´ë¸”)
â”œâ”€ ğŸ”— API í˜¸ì¶œ ëª©ë¡
â”‚   â”œâ”€ ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€ ìš”ì²­/ì‘ë‹µ
â”‚   â””â”€ ìƒíƒœ ì½”ë“œ
â”œâ”€ âŒ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ ìƒì„¸
â”œâ”€ ğŸ”§ ìˆ˜ì •ì‚¬í•­ (ìˆì„ ê²½ìš°)
â””â”€ ğŸ“ ê²°ë¡  ë° ê¶Œì¥ì‚¬í•­
```

### 6ë‹¨ê³„: ê²°ê³¼ ì €ì¥
```
ë¦¬í¬íŠ¸: /home/peterchung/HWTestAgent/test-results/MyTester/reports/
        YYYY-MM-DD-[ì‹œì‘]-[ëª©í‘œ]-í†µí•©-í…ŒìŠ¤íŠ¸.md

API ë¡œê·¸: /home/peterchung/HWTestAgent/test-results/MyTester/logs/
          YYYY-MM-DD-api-calls.json
```

## API ë¡œê·¸ í˜•ì‹
```json
{
  "timestamp": "2026-01-03T10:30:00Z",
  "calls": [
    {
      "endpoint": "POST /api/auth/test-login",
      "status": 200,
      "duration": 150,
      "request": { "email": "test@wavebridge.kr" },
      "response": { "token": "..." }
    }
  ]
}
```

## ìë™ ìˆ˜ì • ëŒ€ìƒ
| ì˜¤ë¥˜ ìœ í˜• | ìˆ˜ì • ë°©ë²• |
|----------|----------|
| 401 Unauthorized | í† í° ì¬ë°œê¸‰ ë˜ëŠ” ì¸ì¦ ë¡œì§ ìˆ˜ì • |
| 404 Not Found | ë¼ìš°íŠ¸ ê²½ë¡œ ìˆ˜ì • |
| 422 Validation | ìš”ì²­ ìŠ¤í‚¤ë§ˆ ìˆ˜ì • |
| 500 Internal | ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œì§ ìˆ˜ì • |
| Timeout | íƒ€ì„ì•„ì›ƒ ì„¤ì • ë˜ëŠ” ì¿¼ë¦¬ ìµœì í™” |

## ì‚¬ìš© ì˜ˆì‹œ
```
/ë‚´í…ŒìŠ¤í„° í—ˆë¸Œë§¤ë‹ˆì €->ì„¸ì¼ì¦ˆí—ˆë¸Œ í†µí•© í…ŒìŠ¤íŠ¸
/ë‚´í…ŒìŠ¤í„° ì˜¤ë¼í´ì—ì„œ HubManager API í†µí•©
/ë‚´í…ŒìŠ¤í„° integration test
```

## íŒŒì‹± ì •ë³´ (ë©”ì¸ì—ì„œ ì „ë‹¬)
```typescript
interface IntegrationTestConfig {
  env: 'local' | 'oracle' | 'railway';
  startProject: string;   // ì‹œì‘ í”„ë¡œì íŠ¸
  targetProject: string;  // ëª©í‘œ í”„ë¡œì íŠ¸
  startPath: string;      // ì‹œì‘ í”„ë¡œì íŠ¸ ê²½ë¡œ
  targetPath: string;     // ëª©í‘œ í”„ë¡œì íŠ¸ ê²½ë¡œ
  maxRetries: number;     // ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜ (ê¸°ë³¸: 3)
}
```
