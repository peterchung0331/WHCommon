# Docker ì •ë°€ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

**ì‘ì„±ì¼:** 2025-12-31
**ëª©ì :** í° ë³€ê²½ í›„ ëª¨ë“  ì˜í–¥ë„ íŒŒì•…, ë°°í¬ í›„ ì—ëŸ¬ 0 ëª©í‘œ
**ì†Œìš” ì‹œê°„:** 15-20ë¶„
**ì–¸ì œ ì‹¤í–‰:** ì¤‘ìš”í•œ ë³€ê²½ í›„, PR ì „ ìµœì¢… ê²€ì¦, ë¦¬íŒ©í† ë§ í›„

---

## ê°œìš”

ë¦¬íŒ©í† ë§, ì•„í‚¤í…ì²˜ ë³€ê²½, ì£¼ìš” ê¸°ëŠ¥ ì¶”ê°€ ë“± ì¤‘ìš”í•œ ë³€ê²½ í›„ì— ì‹¤í–‰í•˜ëŠ” **ê°€ì¥ í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸**ì…ë‹ˆë‹¤.

Railway í”„ë¡œë•ì…˜ í™˜ê²½ì„ 100% ì‹œë®¬ë ˆì´ì…˜í•˜ì—¬ ë°°í¬ í›„ ë°œìƒí•  ìˆ˜ ìˆëŠ” ëª¨ë“  ë¬¸ì œë¥¼ ì‚¬ì „ì— ë°œê²¬í•˜ê³  **ë°°í¬ í›„ ì—ëŸ¬ë¥¼ 0ìœ¼ë¡œ** ë§Œë“œëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

### í…ŒìŠ¤íŠ¸ êµ¬ì„±

**Part A - ìƒì„¸ ê²€ì¦ (ë‹¨ì¼ ì„œë¹„ìŠ¤)**
- TypeScript, ë¹Œë“œ, ëŸ°íƒ€ì„, Health Check
- Frontend ë¼ìš°íŠ¸, API ì—”ë“œí¬ì¸íŠ¸
- í™˜ê²½ë³€ìˆ˜, ë°ì´í„°ë² ì´ìŠ¤, ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
- **9ê°œ í…ŒìŠ¤íŠ¸**, ì†Œìš” ì‹œê°„ 10-12ë¶„

**Part B - ë©€í‹° ì„œë¹„ìŠ¤ í™˜ê²½ (Railway ì‹œë®¬ë ˆì´ì…˜)**
- WBHubManager + WBFinHub + PostgreSQL 2ê°œ
- docker-compose.railway.yml ì‚¬ìš©
- ì„œë¹„ìŠ¤ ê°„ í†µì‹  ë° Health Check
- **3ê°œ ì„œë¹„ìŠ¤ ê²€ì¦**, ì†Œìš” ì‹œê°„ 5-8ë¶„

---

## Part A: ìƒì„¸ ê²€ì¦ (docker-advanced-test.cjs)

### ì‹¤í–‰ ë°©ë²•

```bash
cd c:/GitHub/WBHubManager
node scripts/docker-advanced-test.cjs
```

### ğŸ“ í…ŒìŠ¤íŠ¸ í›„ ë¦¬í¬íŠ¸ ì‘ì„±

**ì¤‘ìš”:** í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ ì €ì¥í•˜ì„¸ìš”.

1. **í…ŒìŠ¤íŠ¸ë¦¬í¬íŠ¸í¬ë§·** ì‚¬ìš©: `C:\GitHub\WorkHubShared\TestReport\í…ŒìŠ¤íŠ¸-ë¦¬í¬íŠ¸-í…œí”Œë¦¿.md`
2. **ì €ì¥ ìœ„ì¹˜**: `C:\GitHub\WorkHubShared\TestReport\YYYY-MM-DD-[í”„ë¡œì íŠ¸ëª…]-[í…ŒìŠ¤íŠ¸ëª…]-í…ŒìŠ¤íŠ¸.md`
3. **ì˜ˆì‹œ**: `2025-12-31-HubManager-Dockerì •ë°€-í…ŒìŠ¤íŠ¸.md`

ë¦¬í¬íŠ¸ì—ëŠ” ë‹¤ìŒ ë‚´ìš©ì„ í¬í•¨í•˜ì„¸ìš”:
- í…ŒìŠ¤íŠ¸ ê²°ê³¼ (í†µê³¼/ì‹¤íŒ¨ í˜„í™©)
- ë°œê²¬ëœ ë¬¸ì œì  ë° ìˆ˜ì •ì‚¬í•­
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë³„ ìƒì„¸ ë¶„ì„
- ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ì‚¬í•­

**ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” 9ê°œ í…ŒìŠ¤íŠ¸:**

1. **TypeScript íƒ€ì… ì²´í¬** - Root + Frontend íƒ€ì… ì˜¤ë¥˜ í™•ì¸
2. **Docker ë¹Œë“œ** - ì´ë¯¸ì§€ ë¹Œë“œ ë° ì»´íŒŒì¼ ì„±ê³µ í™•ì¸
3. **ëŸ°íƒ€ì„ í…ŒìŠ¤íŠ¸** - ì»¨í…Œì´ë„ˆ ì‹œì‘ ë° 10ì´ˆ í›„ ìƒíƒœ í™•ì¸
4. **Health Check** - `/api/health` ì—”ë“œí¬ì¸íŠ¸ ì‘ë‹µ í™•ì¸
5. **Frontend ë¼ìš°íŠ¸** - `/`, `/hubs/`, `/docs` HTML ë¡œë“œ í™•ì¸
6. **API ì—”ë“œí¬ì¸íŠ¸** - `/api/hubs`, `/api/auth/me` ì‘ë‹µ í™•ì¸
7. **í™˜ê²½ë³€ìˆ˜ ê²€ì¦** - í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ 8ê°œ ë¡œë“œ í™•ì¸
8. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°** - PostgreSQL ì—°ê²° ë¡œê·¸ í™•ì¸
9. **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰** - CPU, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¸¡ì •

---

### Test 1: TypeScript íƒ€ì… ì²´í¬

**ëª©ì :** íƒ€ì… ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ í™•ì¸í•˜ì—¬ ë¹Œë“œ ì‹¤íŒ¨ ë°©ì§€

**ì‹¤í–‰ ëª…ë ¹:**
```bash
# Backend (Root)
npx tsc --noEmit

# Frontend
cd frontend && npx tsc --noEmit
```

**ì„±ê³µ ì¡°ê±´:**
- ì˜¤ë¥˜ ë©”ì‹œì§€ ì—†ì´ ì¢…ë£Œ
- Exit code 0

**ì‹¤íŒ¨ ì‹œ:**
```
error TS2304: Cannot find name 'SomeType'
src/server/routes/api.ts:42:15
```

**ì¡°ì¹˜:**
1. ì˜¤ë¥˜ íŒŒì¼ ë° ì¤„ë²ˆí˜¸ í™•ì¸
2. íƒ€ì… ì˜¤ë¥˜ ìˆ˜ì •
3. ì¬ì‹¤í–‰í•˜ì—¬ ëª¨ë“  ì˜¤ë¥˜ í•´ê²°

**ì¤‘ìš”:** Railway NixpacksëŠ” TypeScript ì»´íŒŒì¼ ì‹œ strict ëª¨ë“œë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. ë¡œì»¬ì—ì„œ í†µê³¼í•´ë„ Railwayì—ì„œ ì‹¤íŒ¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë°˜ë“œì‹œ í™•ì¸í•˜ì„¸ìš”.

---

### Test 2: Docker ë¹Œë“œ

**ëª©ì :** Railway ë°°í¬ í™˜ê²½ê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë¹Œë“œ ì„±ê³µ í™•ì¸

**ì‹¤í–‰ ëª…ë ¹:**
```bash
docker build -f Dockerfile.test -t wbhub-build-test .
```

**ë¹Œë“œ ë‹¨ê³„:**
1. Base ì´ë¯¸ì§€: `node:20-alpine`
2. Dependencies ì„¤ì¹˜: `npm ci`
3. Prisma Client ìƒì„±: `npx prisma generate`
4. TypeScript ì»´íŒŒì¼: `npm run build` (backend)
5. Next.js ë¹Œë“œ: `cd frontend && npm run build`

**ì„±ê³µ ì¡°ê±´:**
- ë¹Œë“œ ì™„ë£Œ ë©”ì‹œì§€ ì¶œë ¥
- Exit code 0
- ì•„í‹°íŒ©íŠ¸ ìƒì„±: `dist/server/`, `frontend/.next/`

**ë¹Œë“œ ì•„í‹°íŒ©íŠ¸ í™•ì¸:**
```bash
docker run --rm wbhub-build-test ls -lh dist/server/
```

**ì˜ˆìƒ ì¶œë ¥:**
```
-rw-r--r-- 1 root root  15K index.js
-rw-r--r-- 1 root root  8K config.js
-rw-r--r-- 1 root root  12K routes/
...
```

**ì‹¤íŒ¨ ì‹œ ì¼ë°˜ì ì¸ ì›ì¸:**
- TypeScript ì»´íŒŒì¼ ì˜¤ë¥˜ (Test 1 ì¬í™•ì¸)
- Next.js ë¹Œë“œ ì˜¤ë¥˜ (í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ í™•ì¸)
- ë©”ëª¨ë¦¬ ë¶€ì¡± (Docker Desktop ë©”ëª¨ë¦¬ ì¦ê°€ í•„ìš”)
- Prisma Client ìƒì„± ì‹¤íŒ¨ (schema.prisma í™•ì¸)

---

### Test 3: ëŸ°íƒ€ì„ í…ŒìŠ¤íŠ¸

**ëª©ì :** ë¹Œë“œëœ ì•±ì´ ì‹¤ì œë¡œ ì‹œì‘ë˜ëŠ”ì§€ í™•ì¸

**ì‹¤í–‰ ê³¼ì •:**
1. ì»¨í…Œì´ë„ˆ ì‹œì‘ (ë°±ê·¸ë¼ìš´ë“œ)
2. 10ì´ˆ ëŒ€ê¸° (ì•± ì´ˆê¸°í™” ì‹œê°„)
3. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸

**ìˆ˜ë™ ì‹¤í–‰:**
```bash
# í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ì¤€ë¹„
# common/railway-env.mdì˜ ```env ë¸”ë¡ â†’ .env.docker-test

# ì»¨í…Œì´ë„ˆ ì‹œì‘
docker run -d --name wbhub-test \
  -p 14090:4090 \
  --env-file .env.docker-test \
  wbhub-build-test \
  node dist/server/index.js

# 10ì´ˆ ëŒ€ê¸°
sleep 10

# ìƒíƒœ í™•ì¸
docker ps -q -f name=wbhub-test
```

**ì„±ê³µ ì¡°ê±´:**
- ì»¨í…Œì´ë„ˆê°€ `Up` ìƒíƒœ ìœ ì§€ (10ì´ˆ í›„ì—ë„)
- Exit code 0

**ì‹¤íŒ¨ ì‹œ:**
ì»¨í…Œì´ë„ˆê°€ `Exited` ìƒíƒœì´ë©´ ë¡œê·¸ í™•ì¸:
```bash
docker logs wbhub-test
```

**ì¼ë°˜ì ì¸ ì˜¤ë¥˜:**
- `DATABASE_URL` ì—°ê²° ì‹¤íŒ¨
- í™˜ê²½ë³€ìˆ˜ ëˆ„ë½ìœ¼ë¡œ ì¸í•œ ì´ˆê¸°í™” ì˜¤ë¥˜
- í¬íŠ¸ ë°”ì¸ë”© ì˜¤ë¥˜

---

### Test 4: Health Check

**ëª©ì :** ê¸°ë³¸ API ì—”ë“œí¬ì¸íŠ¸ê°€ ì‘ë‹µí•˜ëŠ”ì§€ í™•ì¸

**ì—”ë“œí¬ì¸íŠ¸:** `GET /api/health`

**ìˆ˜ë™ í…ŒìŠ¤íŠ¸:**
```bash
curl http://localhost:14090/api/health
```

**ì˜ˆìƒ ì‘ë‹µ:**
```json
{
  "success": true,
  "message": "Server is healthy",
  "timestamp": "2025-12-31T12:34:56.789Z"
}
```

**ì„±ê³µ ì¡°ê±´:**
- HTTP Status: 200 OK
- JSON ì‘ë‹µ í¬ë§· ìœ íš¨

**ì‹¤íŒ¨ ì‹œ:**
- ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸: `docker logs wbhub-test`
- í¬íŠ¸ í™•ì¸: `netstat -ano | findstr :14090`
- ë°©í™”ë²½ í™•ì¸ (Windows Defender)

---

### Test 5: Frontend ë¼ìš°íŠ¸ í…ŒìŠ¤íŠ¸ â­

**ëª©ì :** Next.js Static Exportê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸ (CRITICAL!)

**ì¤‘ìš”ë„:** ğŸ”´ **ë§¤ìš° ë†’ìŒ**
- Next.js static export ì˜¤ë¥˜ëŠ” ë¹Œë“œ ì„±ê³µí•´ë„ í˜ì´ì§€ê°€ 404ë¡œ ë‚˜íƒ€ë‚¨
- ì´ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤ì œ HTML íŒŒì¼ì´ ìƒì„±ë˜ê³  ì„œë¹™ë˜ëŠ”ì§€ í™•ì¸

**í…ŒìŠ¤íŠ¸ ë¼ìš°íŠ¸:**
- `/` - ë£¨íŠ¸ í˜ì´ì§€ (Home)
- `/hubs/` - Hub ì„ íƒ í˜ì´ì§€
- `/docs` - ë¬¸ì„œ í˜ì´ì§€

**ìˆ˜ë™ í…ŒìŠ¤íŠ¸:**
```bash
# ë£¨íŠ¸ í˜ì´ì§€
curl http://localhost:14090/

# Hub ì„ íƒ í˜ì´ì§€
curl http://localhost:14090/hubs/

# ë¬¸ì„œ í˜ì´ì§€
curl http://localhost:14090/docs
```

**ì„±ê³µ ì¡°ê±´:**
- HTTP Status: 200 OK
- ì‘ë‹µ ë³¸ë¬¸ì— `<!DOCTYPE html>` í¬í•¨
- HTML í˜ì´ì§€ ì •ìƒ ë¡œë“œ

**ì‹¤íŒ¨ ì‹œ (404 Not Found):**
```
âŒ Hubs Page - NOT FOUND (static files missing!)
```

**ì›ì¸ ë° í•´ê²°:**

#### ì›ì¸ 1: Next.js Static Export ë¯¸ì„¤ì •
`frontend/next.config.js` í™•ì¸:
```javascript
module.exports = {
  output: 'export', // â† ì´ ì„¤ì •ì´ ìˆì–´ì•¼ í•¨
  // ...
};
```

#### ì›ì¸ 2: ë¹Œë“œ ì¶œë ¥ ë””ë ‰í† ë¦¬ ë¬¸ì œ
Static íŒŒì¼ì´ `frontend/out/`ì— ìƒì„±ë˜ì–´ì•¼ í•¨:
```bash
docker run --rm wbhub-build-test ls -lh frontend/out/
```

#### ì›ì¸ 3: Express Static ì„œë¹™ ì„¤ì • ëˆ„ë½
`server/index.ts` í™•ì¸:
```typescript
app.use(express.static(path.join(__dirname, '../../frontend/out')));
```

**ì´ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ Railway ë°°í¬ í›„ í”„ë¡ íŠ¸ì—”ë“œê°€ ì‘ë™í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë°˜ë“œì‹œ í•´ê²°í•´ì•¼ í•©ë‹ˆë‹¤!**

---

### Test 6: API ì—”ë“œí¬ì¸íŠ¸

**ëª©ì :** ì£¼ìš” APIê°€ ì‘ë‹µí•˜ëŠ”ì§€ í™•ì¸

**í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸:**

#### 1. `/api/hubs` - Hub ëª©ë¡
```bash
curl http://localhost:14090/api/hubs
```

**ì˜ˆìƒ ì‘ë‹µ:**
```json
{
  "success": true,
  "data": [
    {"id": 1, "slug": "wbfinhub", "name": "WB FinHub", ...},
    {"id": 2, "slug": "wbsaleshub", "name": "WB SalesHub", ...},
    {"id": 3, "slug": "onboarding", "name": "Onboarding Hub", ...}
  ]
}
```

#### 2. `/api/auth/me` - ì¸ì¦ ìƒíƒœ (ì„¸ì…˜ ì—†ìŒ)
```bash
curl http://localhost:14090/api/auth/me
```

**ì˜ˆìƒ ì‘ë‹µ:**
```json
{
  "success": false,
  "error": "Unauthorized"
}
```
ë˜ëŠ”
```json
{
  "success": true,
  "data": null
}
```

**ì„±ê³µ ì¡°ê±´:**
- HTTP Status: 200-499 (500ëŒ€ ì„œë²„ ì—ëŸ¬ê°€ ì•„ë‹ˆë©´ OK)
- JSON ì‘ë‹µ í¬ë§· ìœ íš¨

**500 ì—ëŸ¬ ë°œìƒ ì‹œ:**
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
- í™˜ê²½ë³€ìˆ˜ í™•ì¸
- ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸

---

### Test 7: í™˜ê²½ë³€ìˆ˜ ê²€ì¦

**ëª©ì :** ëª¨ë“  í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ê°€ ì»¨í…Œì´ë„ˆì— ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸

**í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ 8ê°œ:**
1. `DATABASE_URL` - PostgreSQL ì—°ê²° ë¬¸ìì—´
2. `SESSION_SECRET` - ì„¸ì…˜ ì•”í˜¸í™” í‚¤
3. `JWT_PRIVATE_KEY` - JWT ì„œëª…ìš© Private Key
4. `JWT_PUBLIC_KEY` - JWT ê²€ì¦ìš© Public Key
5. `JWT_SECRET` - JWT ëŒ€ì¹­í‚¤ (legacy)
6. `GOOGLE_CLIENT_ID` - Google OAuth Client ID
7. `GOOGLE_CLIENT_SECRET` - Google OAuth Client Secret
8. `APP_URL` - ì• í”Œë¦¬ì¼€ì´ì…˜ URL

**ìˆ˜ë™ í…ŒìŠ¤íŠ¸:**
```bash
docker exec wbhub-test sh -c "env | grep DATABASE_URL"
docker exec wbhub-test sh -c "env | grep SESSION_SECRET"
docker exec wbhub-test sh -c "env | grep JWT_PRIVATE_KEY" | head -n 1
docker exec wbhub-test sh -c "env | grep JWT_PUBLIC_KEY" | head -n 1
docker exec wbhub-test sh -c "env | grep JWT_SECRET"
docker exec wbhub-test sh -c "env | grep GOOGLE_CLIENT_ID"
docker exec wbhub-test sh -c "env | grep GOOGLE_CLIENT_SECRET"
docker exec wbhub-test sh -c "env | grep APP_URL"
```

**ì„±ê³µ ì¡°ê±´:**
- ëª¨ë“  í™˜ê²½ë³€ìˆ˜ê°€ ë¹ˆ ê°’ì´ ì•„ë‹˜

**ì‹¤íŒ¨ ì‹œ:**
1. `common/railway-env.md` ì—…ë°ì´íŠ¸
2. Railway ëŒ€ì‹œë³´ë“œ â†’ Variablesì—ì„œ ìµœì‹  ê°’ ë³µì‚¬
3. `.env.docker-test` ì¬ìƒì„±
4. ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

---

### Test 8: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°

**ëª©ì :** PostgreSQL ì—°ê²°ì´ ì •ìƒì¸ì§€ í™•ì¸

**í™•ì¸ ë°©ë²•:** ì»¨í…Œì´ë„ˆ ë¡œê·¸ì—ì„œ ì—°ê²° ì„±ê³µ ë©”ì‹œì§€ ê²€ìƒ‰

```bash
docker logs wbhub-test 2>&1 | grep -i "PostgreSQL\|Database connection"
```

**ì˜ˆìƒ ë¡œê·¸:**
```
âœ… PostgreSQL client connected
```
ë˜ëŠ”
```
Database connection check successful
```

**ì„±ê³µ ì¡°ê±´:**
- ë¡œê·¸ì—ì„œ DB ì—°ê²° ì„±ê³µ ë©”ì‹œì§€ í™•ì¸
- ë˜ëŠ” DB ê´€ë ¨ ì—ëŸ¬ê°€ ì—†ìŒ

**ì‹¤íŒ¨ ì‹œ:**
```
Error: connect ECONNREFUSED postgres:5432
```

**ì›ì¸:**
- `DATABASE_URL`ì´ ì˜ëª»ë˜ì—ˆê±°ë‚˜ DBê°€ ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœ

**í•´ê²°:**
- Railway PostgreSQLì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
- `DATABASE_URL` í¬ë§· í™•ì¸:
  ```
  postgresql://postgres:PASSWORD@HOST:PORT/railway
  ```

---

### Test 9: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰

**ëª©ì :** CPU ë° ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì •ìƒ ë²”ìœ„ì¸ì§€ í™•ì¸

**ìˆ˜ë™ í…ŒìŠ¤íŠ¸:**
```bash
docker stats wbhub-test --no-stream
```

**ì˜ˆìƒ ì¶œë ¥:**
```
CONTAINER ID   CPU %     MEM USAGE / LIMIT     MEM %
abc123def456   5.23%     128MiB / 4GiB        3.12%
```

**ì •ìƒ ë²”ìœ„:**
- CPU: 0-20% (ìœ íœ´ ìƒíƒœ)
- Memory: 100-500MB (Next.js í¬í•¨)

**ê²½ê³  ì‹ í˜¸:**
- CPU: 50% ì´ìƒ ì§€ì† â†’ ë¬´í•œ ë£¨í”„ ë˜ëŠ” ê³¼ë„í•œ ì—°ì‚°
- Memory: 1GB ì´ìƒ â†’ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±

**ì¶”ê°€ í™•ì¸:**
```bash
# 10ì´ˆ ë™ì•ˆ ëª¨ë‹ˆí„°ë§
docker stats wbhub-test --no-stream
sleep 10
docker stats wbhub-test --no-stream
```

ë©”ëª¨ë¦¬ê°€ ê³„ì† ì¦ê°€í•˜ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì¡°ì‚¬ í•„ìš”

---

## Part A ê²°ê³¼ ìš”ì•½

### âœ… ëª¨ë“  9ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼

```
âœ… TypeScript Type Check
âœ… Build Test
âœ… Runtime Test
âœ… Health Check
âœ… Frontend Routes
âœ… API Endpoints
âœ… Environment Variables
âœ… Database Connection
âœ… Resource Usage

Total: 9 passed, 0 failed

ğŸ‰ All tests PASSED!
âœ… Your application is ready for Railway deployment
```

**ì˜ë¯¸:** ë‹¨ì¼ ì„œë¹„ìŠ¤(WBHubManager)ê°€ ì™„ë²½í•˜ê²Œ ì‘ë™í•¨

**ë‹¤ìŒ ë‹¨ê³„:** Part B ë©€í‹° ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ë¡œ ì§„í–‰

---

### âŒ ì¼ë¶€ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨

ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ì— ë”°ë¼ ë¬¸ì œ í•´ê²°:
- Test 1-2 ì‹¤íŒ¨: **ì¹˜ëª…ì ** â†’ ë¹Œë“œ ë¬¸ì œ í•´ê²° í›„ ì¬ì‹œë„
- Test 3-4 ì‹¤íŒ¨: **ë†’ìŒ** â†’ ì•± ì‹œì‘ ë¬¸ì œ í•´ê²° í›„ ì¬ì‹œë„
- Test 5 ì‹¤íŒ¨: **ë§¤ìš° ë†’ìŒ** â†’ Frontend Static Export ë¬¸ì œ í•´ê²° í•„ìˆ˜
- Test 6 ì‹¤íŒ¨: **ì¤‘ê°„** â†’ API ë¬¸ì œ ì¡°ì‚¬ (DB ì—°ê²° í™•ì¸)
- Test 7-8 ì‹¤íŒ¨: **ì¤‘ê°„** â†’ í™˜ê²½ë³€ìˆ˜ ì—…ë°ì´íŠ¸ í›„ ì¬ì‹œë„
- Test 9 ì‹¤íŒ¨: **ë‚®ìŒ** â†’ ì°¸ê³ ìš© (ì„±ëŠ¥ ìµœì í™” í•„ìš” ì‹œ)

---

## Part B: ë©€í‹° ì„œë¹„ìŠ¤ í™˜ê²½ (railway-docker-test.cjs)

### ê°œìš”

**Railway í”„ë¡œë•ì…˜ í™˜ê²½ 100% ì‹œë®¬ë ˆì´ì…˜:**
- WBHubManager (Gateway)
- WBFinHub (ì¬ë¬´ ê´€ë¦¬ Hub)
- PostgreSQL 2ê°œ (ê° ì„œë¹„ìŠ¤ë³„ ë…ë¦½ DB)

**docker-compose.railway.yml ì‚¬ìš©**

### ì‹¤í–‰ ë°©ë²•

```bash
cd c:/GitHub/WBHubManager
npm run test:railway
```

ë˜ëŠ”

```bash
node scripts/railway-docker-test.cjs
```

**ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” ì‘ì—…:**

1. **í™˜ê²½ë³€ìˆ˜ ì¶”ì¶œ**
   - `Common/railway-env.md`ì—ì„œ ```env ë¸”ë¡ íŒŒì‹±
   - `.env.railway-test` íŒŒì¼ ìƒì„±

2. **Docker Compose ë¹Œë“œ**
   - WBHubManager ì´ë¯¸ì§€ ë¹Œë“œ
   - WBFinHub ì´ë¯¸ì§€ ë¹Œë“œ (ë³„ë„ ì €ì¥ì†Œì—ì„œ)
   - PostgreSQL 2ê°œ ì»¨í…Œì´ë„ˆ ì¤€ë¹„

3. **ì„œë¹„ìŠ¤ ì‹œì‘**
   - PostgreSQL Healthcheck ëŒ€ê¸°
   - WBHubManager ì‹œì‘ (í¬íŠ¸ 4090)
   - WBFinHub Backend ì‹œì‘ (í¬íŠ¸ 4020)
   - WBFinHub Frontend ì‹œì‘ (í¬íŠ¸ 3020)

4. **Health Check**
   - WBHubManager: `http://localhost:4090/api/health`
   - WBFinHub Backend: `http://localhost:4020/api/health`
   - WBFinHub Frontend: `http://localhost:3020`

5. **ë¡œê·¸ ì¶œë ¥**
   - ê° ì„œë¹„ìŠ¤ì˜ ìµœê·¼ 20ì¤„ ë¡œê·¸ í‘œì‹œ

---

### Railway vs Docker í™˜ê²½ ë¹„êµ

| í•­ëª© | Railway | Docker ë¡œì»¬ | ë¹„ê³  |
|------|---------|-------------|------|
| **ë¹Œë“œ ë°©ì‹** | Nixpacks | docker-compose build | ë™ì¼í•œ Node.js 20, ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œ |
| **í™˜ê²½ë³€ìˆ˜** | Railway UI | .env.railway-test | railway-env.mdì—ì„œ ìë™ ì¶”ì¶œ |
| **ë°ì´í„°ë² ì´ìŠ¤** | Railway PostgreSQL | postgres:16-alpine | ë™ì¼í•œ PostgreSQL 16 |
| **ë„¤íŠ¸ì›Œí¬** | Railway ë‚´ë¶€ DNS | Docker bridge | ë‚´ë¶€ í†µì‹  ë°©ì‹ ë™ì¼ |
| **í¬íŠ¸** | ìë™ í• ë‹¹ | 4090, 3020, 4020 | ëª…ì‹œì  ë§¤í•‘ |
| **SSL/TLS** | ìë™ HTTPS | HTTP | ê°œë°œ í™˜ê²½ì´ë¯€ë¡œ ì˜í–¥ ë‚®ìŒ |
| **ë„ë©”ì¸** | up.railway.app | localhost | í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ |
| **ì¬ì‹œì‘ ì •ì±…** | ON_FAILURE (ìµœëŒ€ 10íšŒ) | unless-stopped | ë™ì‘ ìœ ì‚¬ |

**ì˜í–¥ë„:**
- ğŸŸ¢ ë‚®ìŒ (ë¬´ì‹œ ê°€ëŠ¥): SSL/TLS, ë„ë©”ì¸, ì¬ì‹œì‘ ì •ì±…
- ğŸŸ¡ ì¤‘ê°„ (ì¸ì§€ í•„ìš”): ë¡œê·¸ ìˆ˜ì§‘ ë°©ë²•, í™˜ê²½ë³€ìˆ˜ ì£¼ì… ë°©ì‹
- ğŸ”´ ë†’ìŒ (í…ŒìŠ¤íŠ¸ ë¶ˆê°€): ìŠ¤ì¼€ì¼ë§ (ìˆ˜í‰ í™•ì¥, ë¶€í•˜ í…ŒìŠ¤íŠ¸)

---

### ìˆ˜ë™ ì‹¤í–‰ (ë‹¨ê³„ë³„)

#### 1ë‹¨ê³„: í™˜ê²½ë³€ìˆ˜ ì¤€ë¹„
```bash
# Common/railway-env.md í™•ì¸
# Railway ëŒ€ì‹œë³´ë“œì—ì„œ ìµœì‹  í™˜ê²½ë³€ìˆ˜ ë³µì‚¬ â†’ ```env ë¸”ë¡ ì—…ë°ì´íŠ¸
```

#### 2ë‹¨ê³„: Docker Compose ë¹Œë“œ
```bash
docker-compose -f docker-compose.railway.yml build
```

**ì˜ˆìƒ ì‹œê°„:** 5-10ë¶„ (ìµœì´ˆ ë¹Œë“œ)

#### 3ë‹¨ê³„: ì„œë¹„ìŠ¤ ì‹œì‘
```bash
docker-compose -f docker-compose.railway.yml up -d
```

#### 4ë‹¨ê³„: ì´ˆê¸°í™” ëŒ€ê¸°
```bash
# 10ì´ˆ ëŒ€ê¸° (ì„œë¹„ìŠ¤ ì´ˆê¸°í™”)
sleep 10
```

#### 5ë‹¨ê³„: Health Check
```bash
# WBHubManager
curl http://localhost:4090/api/health

# WBFinHub Backend
curl http://localhost:4020/api/health

# WBFinHub Frontend
curl http://localhost:3020
```

**ëª¨ë‘ ì‘ë‹µí•˜ë©´ ì„±ê³µ!**

#### 6ë‹¨ê³„: ë¡œê·¸ í™•ì¸
```bash
# ì „ì²´ ë¡œê·¸
docker-compose -f docker-compose.railway.yml logs -f

# íŠ¹ì • ì„œë¹„ìŠ¤
docker logs railway-wbhubmanager -f
docker logs railway-wbfinhub -f
```

#### 7ë‹¨ê³„: ì •ë¦¬
```bash
# ì»¨í…Œì´ë„ˆ ì¤‘ì§€ ë° ì œê±°
docker-compose -f docker-compose.railway.yml down

# ë³¼ë¥¨ê¹Œì§€ ì œê±° (ë°ì´í„° ì´ˆê¸°í™”)
docker-compose -f docker-compose.railway.yml down -v

# í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ì‚­ì œ
rm .env.railway-test
```

---

### Part B ì„±ê³µ ê¸°ì¤€

âœ… **ëª¨ë“  ì„œë¹„ìŠ¤ ì •ìƒ:**
- WBHubManager Health Check í†µê³¼
- WBFinHub Backend Health Check í†µê³¼
- WBFinHub Frontend HTML ë¡œë“œ
- PostgreSQL 2ê°œ ì—°ê²° ì„±ê³µ
- ë¡œê·¸ì— ì¹˜ëª…ì  ì—ëŸ¬ ì—†ìŒ

---

### Part B ë¬¸ì œ í•´ê²°

#### PostgreSQL ì—°ê²° ì‹¤íŒ¨

**ì¦ìƒ:**
```
Error: connect ECONNREFUSED postgres:5432
```

**ì›ì¸:** PostgreSQL ì»¨í…Œì´ë„ˆê°€ ì¤€ë¹„ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
```bash
# PostgreSQL Health check ëŒ€ê¸° ì‹œê°„ ì¦ê°€
# docker-compose.railway.yml ìˆ˜ì •:
healthcheck:
  start_period: 60s  # 40s â†’ 60s

# ë˜ëŠ” ìˆ˜ë™ìœ¼ë¡œ ëŒ€ê¸° í›„ ì¬ì‹œì‘
docker-compose -f docker-compose.railway.yml up -d postgres-hubmanager
sleep 10
docker-compose -f docker-compose.railway.yml up -d wbhubmanager
```

#### WBFinHub ë¹Œë“œ ì‹¤íŒ¨

**ì¦ìƒ:**
```
Error: failed to build wbfinhub: ...
```

**ì›ì¸:** WBFinHub ì €ì¥ì†Œê°€ ë¡œì»¬ì— ì—†ê±°ë‚˜ ê²½ë¡œ ë¬¸ì œ

**í•´ê²°:**
```bash
# WBFinHub ì €ì¥ì†Œ í™•ì¸
ls c:/GitHub/WBFinHub

# ì—†ìœ¼ë©´ í´ë¡ 
cd c:/GitHub
git clone <WBFinHub-repo>

# docker-compose.railway.ymlì—ì„œ ê²½ë¡œ í™•ì¸:
services:
  wbfinhub:
    build:
      context: ../WBFinHub  # â† ì´ ê²½ë¡œê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
```

---

## í†µí•© ê²°ê³¼ í•´ì„

### âœ… Part A + Part B ëª¨ë‘ í†µê³¼

```
Part A: ë‹¨ì¼ ì„œë¹„ìŠ¤ ê²€ì¦
âœ… TypeScript, ë¹Œë“œ, ëŸ°íƒ€ì„, Health Check í†µê³¼
âœ… Frontend, API, í™˜ê²½ë³€ìˆ˜, DB, ë¦¬ì†ŒìŠ¤ ì •ìƒ

Part B: ë©€í‹° ì„œë¹„ìŠ¤ í™˜ê²½
âœ… WBHubManager, WBFinHub, PostgreSQL 2ê°œ ì •ìƒ
âœ… ì„œë¹„ìŠ¤ ê°„ í†µì‹  í™•ì¸
âœ… Railway í™˜ê²½ ì‹œë®¬ë ˆì´ì…˜ ì„±ê³µ

ğŸ‰ ì™„ë²½í•œ ê²€ì¦ ì™„ë£Œ!
âœ… Railway ë°°í¬ í›„ ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥ì„± ê·¹íˆ ë‚®ìŒ
```

**ë‹¤ìŒ ë‹¨ê³„:**
```bash
# ì•ˆì‹¬í•˜ê³  ë°°í¬
git push origin main
```

---

### âŒ Part AëŠ” í†µê³¼, Part B ì‹¤íŒ¨

**ì˜ë¯¸:**
- WBHubManager ë‹¨ë…ìœ¼ë¡œëŠ” ì •ìƒ
- ë©€í‹° ì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ë¬¸ì œ ë°œìƒ (ì„œë¹„ìŠ¤ ê°„ í†µì‹ , DB ë¶„ë¦¬ ë“±)

**ì¡°ì¹˜:**
- Part B ë¡œê·¸ í™•ì¸: `docker-compose -f docker-compose.railway.yml logs`
- ê° ì„œë¹„ìŠ¤ Health Check ê°œë³„ í™•ì¸
- ë„¤íŠ¸ì›Œí¬ í†µì‹  ë¬¸ì œ ì¡°ì‚¬
- PostgreSQL ì—°ê²° ë¬¸ìì—´ í™•ì¸

---

### âŒ Part A ì‹¤íŒ¨

**ì˜ë¯¸:**
- WBHubManager ê¸°ë³¸ ê¸°ëŠ¥ì— ë¬¸ì œ
- Part B í…ŒìŠ¤íŠ¸ ë¶ˆí•„ìš” (Part A ë¨¼ì € í•´ê²°)

**ì¡°ì¹˜:**
- Part A ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ í™•ì¸
- í•´ë‹¹ ì„¹ì…˜ì˜ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ ì°¸ì¡°
- ë¬¸ì œ í•´ê²° í›„ Part A ì¬ì‹œë„
- Part A í†µê³¼ í›„ Part B ì§„í–‰

---

## ë¬¸ì œ í•´ê²° ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë¹Œë“œ ì‹¤íŒ¨

- [ ] TypeScript íƒ€ì… ì˜¤ë¥˜ í™•ì¸ (`npx tsc --noEmit`)
- [ ] `node_modules` ì„¤ì¹˜ í™•ì¸ (`npm ci`)
- [ ] Next.js ì„¤ì • í™•ì¸ (`frontend/next.config.js`)
- [ ] Dockerfile ë¬¸ë²• í™•ì¸
- [ ] Docker Desktop ë©”ëª¨ë¦¬ ì¶©ë¶„ (ìµœì†Œ 4GB)

### ëŸ°íƒ€ì„ ì‹¤íŒ¨

- [ ] í™˜ê²½ë³€ìˆ˜ íŒŒì¼ í™•ì¸ (`common/railway-env.md`)
- [ ] `DATABASE_URL` ì—°ê²° ê°€ëŠ¥ í™•ì¸
- [ ] í¬íŠ¸ ì¶©ëŒ í™•ì¸ (14090, 4090, 3020, 4020)
- [ ] ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸ (`docker logs`)

### Frontend 404 ì—ëŸ¬

- [ ] `frontend/next.config.js`ì— `output: 'export'` ì„¤ì •
- [ ] `frontend/out/` ë””ë ‰í† ë¦¬ ìƒì„± í™•ì¸
- [ ] Express static ì„œë¹™ ì„¤ì • í™•ì¸
- [ ] HTML íŒŒì¼ ì¡´ì¬ í™•ì¸ (`frontend/out/index.html`)

### ë©€í‹° ì„œë¹„ìŠ¤ í†µì‹  ì‹¤íŒ¨

- [ ] docker-compose.yml ë„¤íŠ¸ì›Œí¬ ì„¤ì • í™•ì¸
- [ ] ì„œë¹„ìŠ¤ëª…ìœ¼ë¡œ í†µì‹  ê°€ëŠ¥í•œì§€ í™•ì¸ (DNS)
- [ ] ê° ì„œë¹„ìŠ¤ì˜ í™˜ê²½ë³€ìˆ˜ í™•ì¸
- [ ] PostgreSQL ì»¨í…Œì´ë„ˆ Health Check í†µê³¼ í™•ì¸

---

## Part C: ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (ì„ íƒ ì‚¬í•­)

### ê°œìš”

ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ê³  ë²¤ì¹˜ë§ˆí¬í•˜ëŠ” ì„ íƒì  í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì„±ëŠ¥ ìµœì í™” ì‘ì—… í›„ ë˜ëŠ” ì •ê¸°ì ì¸ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ì´ í•„ìš”í•  ë•Œ ì‹¤í–‰í•©ë‹ˆë‹¤.

### ì‹¤í–‰ ë°©ë²•

```bash
npm run test:deploy:perf
```

**ì†Œìš” ì‹œê°„:** 5-10ë¶„

---

### Performance Test 1: Startup Time

**ëª©ì :** ì»¨í…Œì´ë„ˆ ì‹œì‘ë¶€í„° ì²« API ì‘ë‹µê¹Œì§€ ì‹œê°„ ì¸¡ì •

**ì„±ëŠ¥ ê¸°ì¤€:**
- âœ… **Excellent:** < 10ì´ˆ
- ğŸŸ¡ **Good:** < 20ì´ˆ
- ğŸ”´ **Poor:** > 20ì´ˆ

**ì¸¡ì • ë°©ë²•:**
```bash
# ì‹œì‘ ì‹œê°„ ê¸°ë¡
start=$(date +%s)

# ì»¨í…Œì´ë„ˆ ì‹œì‘
docker run -d --name wbhub-perf-test ...

# Health check ì„±ê³µê¹Œì§€ ëŒ€ê¸°
while ! curl -f http://localhost:14090/api/health; do
  sleep 1
done

# ì¢…ë£Œ ì‹œê°„ ê¸°ë¡
end=$(date +%s)
echo "Startup time: $((end - start)) seconds"
```

---

### Performance Test 2: Response Time

**ëª©ì :** ê° ì—”ë“œí¬ì¸íŠ¸ì˜ í‰ê·  ì‘ë‹µ ì‹œê°„ ì¸¡ì •

**í…ŒìŠ¤íŠ¸ ëŒ€ìƒ:**
- `/api/health`
- `/api/hubs`

**ì„±ëŠ¥ ê¸°ì¤€:**
- âœ… **Excellent:** < 100ms
- ğŸŸ¡ **Good:** < 500ms
- ğŸ”´ **Poor:** > 500ms

**ì¸¡ì • ë°©ë²•:**
```bash
# 5íšŒ ìš”ì²­ í›„ í‰ê· , ìµœì†Œ, ìµœëŒ€ ì‘ë‹µ ì‹œê°„ ê³„ì‚°
for i in {1..5}; do
  curl -w "%{time_total}\n" -o /dev/null -s http://localhost:14090/api/health
done
```

---

### Performance Test 3: Concurrent Requests

**ëª©ì :** ë™ì‹œ ìš”ì²­ ì²˜ë¦¬ ì„±ëŠ¥ ì¸¡ì •

**í…ŒìŠ¤íŠ¸ ì¡°ê±´:**
- 10ê°œ ë™ì‹œ ìš”ì²­
- ëª¨ë“  ìš”ì²­ì´ ì„±ê³µí•´ì•¼ í•¨

**ì„±ëŠ¥ ê¸°ì¤€:**
- âœ… **Excellent:** í‰ê·  < 200ms
- ğŸŸ¡ **Good:** í‰ê·  < 1000ms
- ğŸ”´ **Poor:** í‰ê·  > 1000ms

---

### Performance Test 4: Memory Usage Over Time

**ëª©ì :** ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í™•ì¸

**ì¸¡ì • ë°©ë²•:**
- 10ì´ˆ ë™ì•ˆ 1ì´ˆë§ˆë‹¤ ë©”ëª¨ë¦¬ ìƒ˜í”Œë§
- ë©”ëª¨ë¦¬ê°€ ì§€ì†ì ìœ¼ë¡œ ì¦ê°€í•˜ë©´ ëˆ„ìˆ˜ ì˜ì‹¬

```bash
for i in {1..10}; do
  docker stats wbhub-perf-test --no-stream --format "{{.MemUsage}}"
  sleep 1
done
```

**ì •ìƒ íŒ¨í„´:** ë©”ëª¨ë¦¬ê°€ ì¼ì • ë²”ìœ„ ë‚´ì—ì„œ ìœ ì§€ë¨
**ê²½ê³  ì‹ í˜¸:** ë©”ëª¨ë¦¬ê°€ ê³„ì† ì¦ê°€

---

### Performance Test 5: CPU Usage

**ëª©ì :** ë¶€í•˜ ìƒí™©ì—ì„œ CPU ì‚¬ìš©ë¥  ì¸¡ì •

**í…ŒìŠ¤íŠ¸ ì¡°ê±´:**
- 20ê°œ ìš”ì²­ ì „ì†¡
- ë¶€í•˜ í›„ CPU ì‚¬ìš©ë¥  í™•ì¸

**ì •ìƒ ë²”ìœ„:**
- ìœ íœ´ ìƒíƒœ: 0-10%
- ë¶€í•˜ ìƒíƒœ: 10-50%
- ê²½ê³ : 50% ì´ìƒ ì§€ì†

---

### ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì €ì¥

ì •ê¸°ì ì¸ ì„±ëŠ¥ ì¸¡ì •ì„ ìœ„í•´ ê²°ê³¼ë¥¼ ì €ì¥:

```bash
# ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ê²°ê³¼ ì €ì¥
npm run test:deploy:perf > perf-results-$(date +%Y%m%d).txt

# ì£¼ê°„ ë²¤ì¹˜ë§ˆí¬ ë¹„êµ
diff perf-results-20250101.txt perf-results-20250108.txt
```

---

## ê´€ë ¨ íŒŒì¼

### í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸

- `scripts/docker-advanced-test.cjs` - Part A í…ŒìŠ¤íŠ¸
- `scripts/railway-docker-test.cjs` - Part B í…ŒìŠ¤íŠ¸
- `scripts/docker-perf-test.cjs` - Part C ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (ìˆëŠ” ê²½ìš°)
- `docker-compose.railway.yml` - ë©€í‹° ì„œë¹„ìŠ¤ ì„¤ì •

### í™˜ê²½ë³€ìˆ˜

- `Common/railway-env.md` - ëª¨ë“  í™˜ê²½ë³€ìˆ˜ ì €ì¥ì†Œ

### Docker ì„¤ì •

- `Dockerfile` - í”„ë¡œë•ì…˜ Dockerfile
- `Dockerfile.test` - í…ŒìŠ¤íŠ¸ìš© Dockerfile

---

## npm ìŠ¤í¬ë¦½íŠ¸

```bash
# Part A: ìƒì„¸ ê²€ì¦
npm run test:deploy:advanced
# ë˜ëŠ”
node scripts/docker-advanced-test.cjs

# Part B: ë©€í‹° ì„œë¹„ìŠ¤
npm run test:railway
# ë˜ëŠ”
node scripts/railway-docker-test.cjs

# Part A + Part B ìˆœì°¨ ì‹¤í–‰ (ìˆ˜ë™)
npm run test:deploy:advanced && npm run test:railway
```

---

## í…ŒìŠ¤íŠ¸ ì „ëµ

### ì¼ë°˜ì ì¸ ë³€ê²½ (ê¸°ëŠ¥ ì¶”ê°€, ë²„ê·¸ ìˆ˜ì •)
```bash
# ì¼ë°˜ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm run test:deploy
```

### SSO ê´€ë ¨ ë³€ê²½
```bash
# SSO í…ŒìŠ¤íŠ¸
node scripts/docker-sso-test.cjs
```

### ì¤‘ìš”í•œ ë³€ê²½ (ë¦¬íŒ©í† ë§, ì•„í‚¤í…ì²˜)
```bash
# ì •ë°€ í…ŒìŠ¤íŠ¸ Part A
npm run test:deploy:advanced

# í†µê³¼í•˜ë©´ Part B
npm run test:railway
```

### PR ì „ ìµœì¢… ê²€ì¦
```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ (ì¼ë°˜ + SSO + ì •ë°€)
npm run test:deploy
node scripts/docker-sso-test.cjs
npm run test:deploy:advanced
npm run test:railway
```

---

## í…ŒìŠ¤íŠ¸ ìš”ì•½ í…Œì´ë¸”

| í…ŒìŠ¤íŠ¸ | ëª…ë ¹ì–´ | ì‹œê°„ | Docker | ë²”ìœ„ | ìš©ë„ |
|--------|--------|------|--------|------|------|
| **ë¹ ë¥¸ ì˜ì¡´ì„±** | `npm run test:deps` | 1-2ë¶„ | âŒ | ì˜ì¡´ì„±ë§Œ | ë¹ ë¥¸ ê²€ì¦ |
| **ì¼ë°˜ í…ŒìŠ¤íŠ¸** | `npm run test:deploy` | 5-10ë¶„ | âœ… | ê¸°ë³¸ 4ê°œ | ë°°í¬ ì „ í•„ìˆ˜ |
| **SSO í…ŒìŠ¤íŠ¸** | `node scripts/docker-sso-test.cjs` | 10-15ë¶„ | âœ… | SSO 7ê°œ | SSO ë³€ê²½ ì‹œ |
| **ì •ë°€ Part A** | `npm run test:deploy:advanced` | 10-12ë¶„ | âœ… | ìƒì„¸ 9ê°œ | ì¤‘ìš”í•œ ë³€ê²½ |
| **ì •ë°€ Part B** | `npm run test:railway` | 5-8ë¶„ | âœ… | ë©€í‹° ì„œë¹„ìŠ¤ | Railway ì‹œë®¬ë ˆì´ì…˜ |
| **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸** | `npm run test:deploy:perf` | 5-10ë¶„ | âœ… | ì„±ëŠ¥ 5ê°œ | ì„±ëŠ¥ ìµœì í™” í›„ |

### ì¶”ì²œ ì‹¤í–‰ ìˆœì„œ

**ì¼ë°˜ì ì¸ ê°œë°œ:**
```
1. npm run test:deps (1-2ë¶„)
2. npm run test:deploy (5-10ë¶„)
```

**SSO ê´€ë ¨ ë³€ê²½:**
```
1. npm run test:deploy (5-10ë¶„)
2. node scripts/docker-sso-test.cjs (10-15ë¶„)
```

**ì¤‘ìš”í•œ ë³€ê²½ (ë¦¬íŒ©í† ë§, ì•„í‚¤í…ì²˜):**
```
1. npm run test:deploy (5-10ë¶„)
2. npm run test:deploy:advanced (10-12ë¶„)
3. npm run test:railway (5-8ë¶„)
```

**PR ìƒì„± ì „ ì™„ì „ ê²€ì¦:**
```
1. npm run test:deps (1-2ë¶„)
2. npm run test:deploy (5-10ë¶„)
3. node scripts/docker-sso-test.cjs (10-15ë¶„)
4. npm run test:deploy:advanced (10-12ë¶„)
5. npm run test:railway (5-8ë¶„)
ì´ ì†Œìš” ì‹œê°„: ì•½ 30-50ë¶„
```

---

## ì°¸ê³  ë¬¸ì„œ

- **[ì¼ë°˜í…ŒìŠ¤íŠ¸.md](./ì¼ë°˜í…ŒìŠ¤íŠ¸.md)** - ë°°í¬ ì „ í•„ìˆ˜ ë¹ ë¥¸ ì²´í¬
- **[SSOí…ŒìŠ¤íŠ¸.md](./SSOí…ŒìŠ¤íŠ¸.md)** - Hub ê°„ SSO ì¸ì¦ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- **[railway-docker-test-guide.md](./railway-docker-test-guide.md)** - Railway í™˜ê²½ ìƒì„¸ ê°€ì´ë“œ

---

## ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

PR ìƒì„± ì „, ì¤‘ìš”í•œ ë³€ê²½ ë°°í¬ ì „ ì´ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”:

### Part A: ë‹¨ì¼ ì„œë¹„ìŠ¤
- [ ] TypeScript íƒ€ì… ì²´í¬ í†µê³¼ (backend & frontend)
- [ ] Docker ë¹Œë“œ ì„±ê³µ
- [ ] ëŸ°íƒ€ì„ í…ŒìŠ¤íŠ¸ í†µê³¼ (10ì´ˆ í›„ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì¤‘)
- [ ] Health Check í†µê³¼ (`/api/health`)
- [ ] Frontend ë¼ìš°íŠ¸ 3ê°œ ëª¨ë‘ HTML ë¡œë“œ (/, /hubs/, /docs)
- [ ] API ì—”ë“œí¬ì¸íŠ¸ 2ê°œ ì‘ë‹µ ì •ìƒ (/api/hubs, /api/auth/me)
- [ ] í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ 8ê°œ ë¡œë“œ í™•ì¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ
- [ ] ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì •ìƒ ë²”ìœ„

### Part B: ë©€í‹° ì„œë¹„ìŠ¤
- [ ] docker-compose.railway.yml ë¹Œë“œ ì„±ê³µ
- [ ] WBHubManager Health Check í†µê³¼
- [ ] WBFinHub Backend Health Check í†µê³¼
- [ ] WBFinHub Frontend HTML ë¡œë“œ
- [ ] PostgreSQL 2ê°œ ì—°ê²° ì„±ê³µ
- [ ] ì„œë¹„ìŠ¤ ë¡œê·¸ì— ì¹˜ëª…ì  ì—ëŸ¬ ì—†ìŒ

### ì¶”ê°€ í™•ì¸
- [ ] ìµœì‹  ì½”ë“œê°€ `main` ë¸Œëœì¹˜ì— ë³‘í•©ë¨
- [ ] `common/railway-env.md`ê°€ ìµœì‹  ìƒíƒœ
- [ ] ê´€ë ¨ ë¬¸ì„œ ì—…ë°ì´íŠ¸ (í•„ìš”ì‹œ)

**ëª¨ë‘ ì²´í¬ë˜ë©´ ë°°í¬ë¥¼ ì§„í–‰í•˜ì„¸ìš”!** ğŸš€

ë°°í¬ í›„ ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥ì„±ì´ ê·¹íˆ ë‚®ìŠµë‹ˆë‹¤. Railway ëª¨ë‹ˆí„°ë§ì„ í†µí•´ ìµœì¢… í™•ì¸í•˜ì„¸ìš”.

---

## ë²„ì „ íˆìŠ¤í† ë¦¬

| ë‚ ì§œ | ë³€ê²½ ë‚´ìš© | ì‘ì„±ì |
|------|----------|--------|
| 2025-12-31 | ì´ˆê¸° ë²„ì „ ì‘ì„± | Claude Code |
