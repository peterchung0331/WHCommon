# Docker ì¼ë°˜ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

**ì‘ì„±ì¼:** 2025-12-31
**ëª©ì :** Railway ë°°í¬ ì „ í•„ìˆ˜ ì‚¬í•­ ë¹ ë¥¸ ì²´í¬
**ì†Œìš” ì‹œê°„:** 5-10ë¶„
**ì–¸ì œ ì‹¤í–‰:** ëª¨ë“  ë°°í¬ ì „ í•„ìˆ˜

---

## ê°œìš”

Railway ë°°í¬ ì „ì— ë°˜ë“œì‹œ í™•ì¸í•´ì•¼ í•  í•µì‹¬ í•­ëª©ë“¤ì„ ë¹ ë¥´ê²Œ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. TypeScript íƒ€ì… ì˜¤ë¥˜, Docker ë¹Œë“œ ì‹¤íŒ¨, í™˜ê²½ë³€ìˆ˜ ëˆ„ë½ ë“± ë°°í¬ ì‹œ ì¹˜ëª…ì ì¸ ë¬¸ì œë¥¼ ì‚¬ì „ì— ë°œê²¬í•©ë‹ˆë‹¤.

### í…ŒìŠ¤íŠ¸ í•­ëª©

1. **TypeScript íƒ€ì… ì²´í¬** - íƒ€ì… ì˜¤ë¥˜ í™•ì¸
2. **Docker ë¹Œë“œ í…ŒìŠ¤íŠ¸** - ì´ë¯¸ì§€ ë¹Œë“œ ë° ì•„í‹°íŒ©íŠ¸ ìƒì„± í™•ì¸
3. **Health Check** - ì•± ì‹œì‘ ë° ê¸°ë³¸ ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
4. **í™˜ê²½ë³€ìˆ˜ ê²€ì¦** - í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ ë¡œë“œ í™•ì¸

### ì„±ê³µ ê¸°ì¤€

âœ… ëª¨ë“  ì²´í¬ í†µê³¼ ì‹œ â†’ **Railway ë°°í¬ ê°€ëŠ¥**
âŒ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨ ì‹œ â†’ **ë¬¸ì œ í•´ê²° í›„ ì¬í…ŒìŠ¤íŠ¸ í•„ìˆ˜**

---

## ì‹¤í–‰ ë°©ë²•

### ìë™ ì‹¤í–‰ (ê¶Œì¥)

```bash
cd c:/GitHub/WBHubManager
npm run test:deploy
```

ë˜ëŠ”

```bash
node scripts/docker-deploy-test.cjs
```

### ğŸ“ í…ŒìŠ¤íŠ¸ í›„ ë¦¬í¬íŠ¸ ì‘ì„±

**ì¤‘ìš”:** í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ ì €ì¥í•˜ì„¸ìš”.

1. **í…ŒìŠ¤íŠ¸ë¦¬í¬íŠ¸í¬ë§·** ì‚¬ìš©: `C:\GitHub\WHCommon\TestReport\í…ŒìŠ¤íŠ¸-ë¦¬í¬íŠ¸-í…œí”Œë¦¿.md`
2. **ì €ì¥ ìœ„ì¹˜**: `C:\GitHub\WHCommon\TestReport\YYYY-MM-DD-[í”„ë¡œì íŠ¸ëª…]-[í…ŒìŠ¤íŠ¸ëª…]-í…ŒìŠ¤íŠ¸.md`
3. **ì˜ˆì‹œ**: `2025-12-31-HubManager-ì¼ë°˜í…ŒìŠ¤íŠ¸.md`

ë¦¬í¬íŠ¸ì—ëŠ” ë‹¤ìŒ ë‚´ìš©ì„ í¬í•¨í•˜ì„¸ìš”:
- í…ŒìŠ¤íŠ¸ ê²°ê³¼ (í†µê³¼/ì‹¤íŒ¨ í˜„í™©)
- ë°œê²¬ëœ ë¬¸ì œì  ë° ìˆ˜ì •ì‚¬í•­
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë³„ ìƒì„¸ ë¶„ì„
- ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ì‚¬í•­

**ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” ì‘ì—…:**
1. `common/railway-env.md`ì—ì„œ í™˜ê²½ë³€ìˆ˜ ì¶”ì¶œ
2. `.env.docker-test` ì„ì‹œ íŒŒì¼ ìƒì„±
3. Docker ì´ë¯¸ì§€ ë¹Œë“œ
4. ë¹Œë“œ ì•„í‹°íŒ©íŠ¸ ê²€ì¦
5. í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ ìë™ ì •ë¦¬

---

### ìˆ˜ë™ ì‹¤í–‰ (ë‹¨ê³„ë³„)

í™˜ê²½ë³€ìˆ˜ íŒŒì¼ì´ ìµœì‹  ìƒíƒœì¸ì§€ ë¨¼ì € í™•ì¸í•˜ì„¸ìš”:

```bash
# Railway ëŒ€ì‹œë³´ë“œì—ì„œ í™˜ê²½ë³€ìˆ˜ ë³µì‚¬ â†’ common/railway-env.md ì—…ë°ì´íŠ¸
```

#### 1ë‹¨ê³„: TypeScript íƒ€ì… ì²´í¬

**ë°±ì—”ë“œ (Root):**
```bash
cd c:/GitHub/WBHubManager
npx tsc --noEmit
```

**í”„ë¡ íŠ¸ì—”ë“œ:**
```bash
cd frontend
npx tsc --noEmit
```

**ì˜ˆìƒ ê²°ê³¼:**
- íƒ€ì… ì˜¤ë¥˜ê°€ ì—†ìœ¼ë©´ ì•„ë¬´ ì¶œë ¥ ì—†ì´ ì¢…ë£Œ
- ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ íŒŒì¼ëª…ê³¼ ì¤„ë²ˆí˜¸ì™€ í•¨ê»˜ ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥

**ì‹¤íŒ¨ ì‹œ:**
- íƒ€ì… ì˜¤ë¥˜ë¥¼ ëª¨ë‘ ìˆ˜ì •í•œ í›„ ë‹¤ì‹œ ì‹¤í–‰
- Railwayì— ë°°í¬í•˜ë©´ ë¹Œë“œ ì‹¤íŒ¨ë¡œ ì´ì–´ì§

---

#### 2ë‹¨ê³„: Docker ë¹Œë“œ í…ŒìŠ¤íŠ¸

```bash
# Docker Desktop ì‹¤í–‰ í™•ì¸
docker --version

# ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ ì •ë¦¬
docker rm -f wbhub-build-test

# Docker ì´ë¯¸ì§€ ë¹Œë“œ (5-10ë¶„ ì†Œìš”)
docker build -f Dockerfile.test -t wbhub-build-test .
```

**ë¹Œë“œ ì„±ê³µ í™•ì¸:**
```bash
# ë¹Œë“œ ì•„í‹°íŒ©íŠ¸ í™•ì¸
docker run --rm wbhub-build-test ls -lh dist/server/
```

**ì˜ˆìƒ ì¶œë ¥:**
```
-rw-r--r-- 1 root root  XXX index.js
-rw-r--r-- 1 root root  XXX config.js
...
```

**ì‹¤íŒ¨ ì‹œ í™•ì¸ì‚¬í•­:**
- TypeScript ì»´íŒŒì¼ ì˜¤ë¥˜
- Next.js ë¹Œë“œ ì˜¤ë¥˜
- Prisma Client ìƒì„± ì˜¤ë¥˜
- `node_modules` ì„¤ì¹˜ ë¬¸ì œ

---

#### 3ë‹¨ê³„: Health Check

```bash
# í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ì¤€ë¹„
# common/railway-env.mdì˜ ```env ë¸”ë¡ ë‚´ìš©ì„ .env.docker-testì— ë³µì‚¬

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (í¬íŠ¸ 14090 ì‚¬ìš©)
docker run -d --name wbhub-build-test \
  -p 14090:4090 \
  --env-file .env.docker-test \
  wbhub-build-test \
  node dist/server/index.js

# 10ì´ˆ ëŒ€ê¸° (ì•± ì´ˆê¸°í™”)
sleep 10

# Health Check
curl http://localhost:14090/api/health
```

**ì˜ˆìƒ ì‘ë‹µ:**
```json
{
  "success": true,
  "message": "Server is healthy",
  "timestamp": "2025-12-31T..."
}
```

**ì‹¤íŒ¨ ì‹œ:**
```bash
# ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸
docker logs wbhub-build-test

# ì¼ë°˜ì ì¸ ë¬¸ì œ:
# - DATABASE_URL ì—°ê²° ì‹¤íŒ¨
# - í™˜ê²½ë³€ìˆ˜ ëˆ„ë½
# - í¬íŠ¸ ì¶©ëŒ
```

**í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬:**
```bash
docker stop wbhub-build-test
docker rm wbhub-build-test
rm .env.docker-test
```

---

#### 4ë‹¨ê³„: í™˜ê²½ë³€ìˆ˜ ê²€ì¦

í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ 8ê°œê°€ ëª¨ë‘ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:

```bash
docker exec wbhub-build-test sh -c "env | grep DATABASE_URL"
docker exec wbhub-build-test sh -c "env | grep SESSION_SECRET"
docker exec wbhub-build-test sh -c "env | grep JWT_PRIVATE_KEY"
docker exec wbhub-build-test sh -c "env | grep JWT_PUBLIC_KEY"
docker exec wbhub-build-test sh -c "env | grep JWT_SECRET"
docker exec wbhub-build-test sh -c "env | grep GOOGLE_CLIENT_ID"
docker exec wbhub-build-test sh -c "env | grep GOOGLE_CLIENT_SECRET"
docker exec wbhub-build-test sh -c "env | grep APP_URL"
```

**ëª¨ë‘ ê°’ì´ ì¶œë ¥ë˜ì–´ì•¼ í•¨**

**ëˆ„ë½ ì‹œ:**
1. `common/railway-env.md` íŒŒì¼ í™•ì¸
2. Railway ëŒ€ì‹œë³´ë“œì—ì„œ ìµœì‹  í™˜ê²½ë³€ìˆ˜ ë³µì‚¬
3. `.env.docker-test` ì¬ìƒì„± í›„ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

---

## í…ŒìŠ¤íŠ¸ ê²°ê³¼ í•´ì„

### âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼

**ì˜ë¯¸:**
- TypeScript íƒ€ì… ì˜¤ë¥˜ ì—†ìŒ
- Docker ë¹Œë“œ ì„±ê³µ
- ì•±ì´ ì •ìƒ ì‹œì‘ë¨
- í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ ëª¨ë‘ ë¡œë“œë¨

**ë‹¤ìŒ ë‹¨ê³„:**
```bash
# ì•ˆì „í•˜ê²Œ Railway ë°°í¬ ê°€ëŠ¥
git push origin main
```

Railwayì—ì„œ ìë™ìœ¼ë¡œ ë°°í¬ê°€ ì‹œì‘ë˜ê³ , ë¡œì»¬ í…ŒìŠ¤íŠ¸ì™€ ë™ì¼í•œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### âŒ TypeScript íƒ€ì… ì²´í¬ ì‹¤íŒ¨

**ì¹˜ëª…ë„:** ğŸ”´ **ë†’ìŒ** (ë°°í¬ ì‹¤íŒ¨ í™•ì •)

**ì¦ìƒ:**
```
error TS2304: Cannot find name 'xyz'
error TS2339: Property 'abc' does not exist on type 'SomeType'
```

**ì¡°ì¹˜:**
1. ì˜¤ë¥˜ ë©”ì‹œì§€ì— í‘œì‹œëœ íŒŒì¼ê³¼ ì¤„ë²ˆí˜¸ í™•ì¸
2. íƒ€ì… ì˜¤ë¥˜ ìˆ˜ì •
3. ë‹¤ì‹œ `npx tsc --noEmit` ì‹¤í–‰í•˜ì—¬ í™•ì¸
4. ëª¨ë“  ì˜¤ë¥˜ í•´ê²°ë  ë•Œê¹Œì§€ ë°˜ë³µ

**ì¤‘ìš”:** RailwayëŠ” Nixpacksë¡œ ë¹Œë“œí•˜ë©°, TypeScript ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ë¹Œë“œê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤.

---

### âŒ Docker ë¹Œë“œ ì‹¤íŒ¨

**ì¹˜ëª…ë„:** ğŸ”´ **ë†’ìŒ** (ë°°í¬ ì‹¤íŒ¨ í™•ì •)

**ì¼ë°˜ì ì¸ ì›ì¸:**

#### 1. ë©”ëª¨ë¦¬ ë¶€ì¡±
```
Error: failed to solve: executor failed running [/bin/sh -c npm run build]: exit code 137
```

**í•´ê²°:**
- Docker Desktop â†’ Settings â†’ Resources
- Memory: ìµœì†Œ 4GB (ê¶Œì¥ 8GB)
- Swap: 2GB
- Apply & Restart

#### 2. ì˜ì¡´ì„± ì„¤ì¹˜ ì‹¤íŒ¨
```
Error: Cannot find module 'some-package'
```

**í•´ê²°:**
```bash
# ë¡œì»¬ì—ì„œ ë¨¼ì € í…ŒìŠ¤íŠ¸
npm ci
npm run build

# ì„±ê³µí•˜ë©´ Docker ë¹Œë“œ ì¬ì‹œë„
docker build -f Dockerfile.test -t wbhub-build-test .
```

#### 3. Next.js ë¹Œë“œ ì˜¤ë¥˜
```
Error: Build failed
```

**í•´ê²°:**
```bash
# í”„ë¡ íŠ¸ì—”ë“œ ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸
cd frontend
npm ci
npm run build

# ì˜¤ë¥˜ ìˆ˜ì • í›„ Docker ë¹Œë“œ
```

---

### âŒ Health Check ì‹¤íŒ¨

**ì¹˜ëª…ë„:** ğŸŸ¡ **ì¤‘ê°„** (ì•± ì‹¤í–‰ ë¬¸ì œ)

**ì¦ìƒ:**
```bash
curl http://localhost:14090/api/health
# ì‘ë‹µ ì—†ìŒ ë˜ëŠ” ì—°ê²° ê±°ë¶€
```

**í™•ì¸ ìˆœì„œ:**

#### 1. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
```bash
docker ps -a | grep wbhub-build-test
```

- ìƒíƒœê°€ `Up`ì´ë©´ â†’ í¬íŠ¸ ë˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ ë¬¸ì œ
- ìƒíƒœê°€ `Exited`ë©´ â†’ ì•± ì‹œì‘ ì‹¤íŒ¨

#### 2. ë¡œê·¸ í™•ì¸
```bash
docker logs wbhub-build-test
```

**ì¼ë°˜ì ì¸ ì˜¤ë¥˜:**

**DATABASE_URL ì—°ê²° ì‹¤íŒ¨:**
```
Error: connect ECONNREFUSED
```
â†’ Railway PostgreSQL URLì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸ (common/railway-env.md)

**í™˜ê²½ë³€ìˆ˜ ëˆ„ë½:**
```
Error: JWT_PRIVATE_KEY is not defined
```
â†’ `.env.docker-test` íŒŒì¼ì— í•´ë‹¹ ë³€ìˆ˜ê°€ ìˆëŠ”ì§€ í™•ì¸

**í¬íŠ¸ ì´ë¯¸ ì‚¬ìš© ì¤‘:**
```
Error: bind: address already in use
```
â†’ ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš© ë˜ëŠ” ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ

---

### âŒ í™˜ê²½ë³€ìˆ˜ ê²€ì¦ ì‹¤íŒ¨

**ì¹˜ëª…ë„:** ğŸŸ¡ **ì¤‘ê°„** (ê¸°ëŠ¥ë³„ ì˜í–¥ë„ ë‹¤ë¦„)

**í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ ì¤‘ í•˜ë‚˜ë¼ë„ ëˆ„ë½ ì‹œ:**

```bash
# í™˜ê²½ë³€ìˆ˜ í™•ì¸ ê²°ê³¼ê°€ ë¹„ì–´ìˆìŒ
docker exec wbhub-build-test sh -c "env | grep JWT_PRIVATE_KEY"
# (ì¶œë ¥ ì—†ìŒ)
```

**í•´ê²°:**
1. `common/railway-env.md` ì—´ê¸°
2. Railway ëŒ€ì‹œë³´ë“œ â†’ Variables íƒ­
3. ìµœì‹  í™˜ê²½ë³€ìˆ˜ ì „ì²´ ë³µì‚¬
4. ```env ë¸”ë¡ì— ë¶™ì—¬ë„£ê¸°
5. í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰

**í™˜ê²½ë³€ìˆ˜ë³„ ì˜í–¥ë„:**

| í™˜ê²½ë³€ìˆ˜ | ëˆ„ë½ ì‹œ ì˜í–¥ |
|---------|------------|
| `DATABASE_URL` | ğŸ”´ ì•± ì‹œì‘ ì‹¤íŒ¨ |
| `SESSION_SECRET` | ğŸ”´ ë¡œê·¸ì¸ ë¶ˆê°€ |
| `JWT_PRIVATE_KEY` | ğŸ”´ Hub ê°„ SSO ì‹¤íŒ¨ |
| `JWT_PUBLIC_KEY` | ğŸ”´ Hub ê°„ SSO ì‹¤íŒ¨ |
| `JWT_SECRET` | ğŸŸ¡ ì¼ë¶€ JWT ê¸°ëŠ¥ ì‹¤íŒ¨ |
| `GOOGLE_CLIENT_ID` | ğŸŸ¡ Google ë¡œê·¸ì¸ ë¶ˆê°€ |
| `GOOGLE_CLIENT_SECRET` | ğŸŸ¡ Google ë¡œê·¸ì¸ ë¶ˆê°€ |
| `APP_URL` | ğŸŸ¢ ë¦¬ë‹¤ì´ë ‰íŠ¸ URL ë¬¸ì œ (ê¸°ëŠ¥ì€ ë™ì‘) |

---

## ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### Dockerê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ:**
```
ERROR: Cannot connect to Docker daemon
```

**í•´ê²°:**
1. Docker Desktop ì‹¤í–‰
2. ì‘ì—… í‘œì‹œì¤„ì—ì„œ Docker ì•„ì´ì½˜ í™•ì¸ (ì‹¤í–‰ ì¤‘ì´ë©´ ì´ˆë¡ìƒ‰)
3. ì¬ì‹œì‘ì´ í•„ìš”í•œ ê²½ìš°: Docker Desktop ì¢…ë£Œ í›„ ë‹¤ì‹œ ì‹¤í–‰

---

### í¬íŠ¸ ì¶©ëŒ

**ì¦ìƒ:**
```
Error: Port 14090 already in use
```

**í•´ê²°:**
```bash
# Windows: í¬íŠ¸ ì‚¬ìš© í”„ë¡œì„¸ìŠ¤ í™•ì¸
netstat -ano | findstr :14090

# PID í™•ì¸ í›„ ì¢…ë£Œ
taskkill /PID <PID> /F

# ë˜ëŠ” ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ ì •ë¦¬
docker rm -f wbhub-build-test
```

---

### í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ì—†ìŒ

**ì¦ìƒ:**
```
âŒ Environment file not found: common/railway-env.md
```

**í•´ê²°:**
```bash
# í™˜ê²½ë³€ìˆ˜ ì—…ë°ì´íŠ¸ ëª¨ë“œë¡œ ì‹¤í–‰
node scripts/docker-deploy-test.cjs --update-env

# Railway ëŒ€ì‹œë³´ë“œì—ì„œ í™˜ê²½ë³€ìˆ˜ ë³µì‚¬ í›„ ë¶™ì—¬ë„£ê¸°
# Ctrl+Dë¡œ ì™„ë£Œ
```

---

### ë¹Œë“œ íƒ€ì„ì•„ì›ƒ

**ì¦ìƒ:**
```
Error: failed to solve: executor failed running [/bin/sh -c npm run build]: exit code 137
```

**ì›ì¸:** Docker Desktop ë©”ëª¨ë¦¬ ë¶€ì¡±

**í•´ê²°:**
1. Docker Desktop â†’ Settings â†’ Resources
2. Memory: ìµœì†Œ 4GBë¡œ ì¦ê°€ (ê¶Œì¥: 8GB)
3. Swap: 2GBë¡œ ì¦ê°€
4. Apply & Restart
5. ë¹Œë“œ ì¬ì‹œë„

---

## ì¶”ê°€ í…ŒìŠ¤íŠ¸ ì˜µì…˜

### ë¹ ë¥¸ ì˜ì¡´ì„± í…ŒìŠ¤íŠ¸ (Docker ë¶ˆí•„ìš”)

ë°°í¬ ì „ì— ì˜ì¡´ì„± ë¬¸ì œë¥¼ ë¹ ë¥´ê²Œ í™•ì¸í•˜ê³  ì‹¶ì„ ë•Œ:

```bash
npm run test:deps
```

**í…ŒìŠ¤íŠ¸ ë‚´ìš©:**
- `npm ci --omit=dev` ì‹œë®¬ë ˆì´ì…˜
- production dependencies ì„¤ì¹˜ í™•ì¸
- TypeScript, Next.js ë“± ë¹Œë“œ ë„êµ¬ í™•ì¸
- `@types/*` íŒ¨í‚¤ì§€ í™•ì¸

**ì†Œìš” ì‹œê°„:** 1-2ë¶„
**Docker ë¶ˆí•„ìš”!**

ì´ í…ŒìŠ¤íŠ¸ëŠ” Docker ì—†ì´ ë¡œì»¬ì—ì„œ ë¹ ë¥´ê²Œ ì˜ì¡´ì„± ë¬¸ì œë¥¼ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## npm ìŠ¤í¬ë¦½íŠ¸

`package.json`ì— ì •ì˜ëœ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸:

```bash
# ì¼ë°˜ í…ŒìŠ¤íŠ¸ (ì´ ë¬¸ì„œ)
npm run test:deploy

# ë¹ ë¥¸ ì˜ì¡´ì„± í…ŒìŠ¤íŠ¸ (Docker ë¶ˆí•„ìš”)
npm run test:deps

# í™˜ê²½ë³€ìˆ˜ ì—…ë°ì´íŠ¸
npm run test:deploy:update
```

---

## ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### ê°œë°œ ì›Œí¬í”Œë¡œìš°

```
ì½”ë“œ ë³€ê²½
   â†“
npm run test:deps (1-2ë¶„, Docker ë¶ˆí•„ìš”)
   â†“
ë§Œì¡±í•˜ë©´
   â†“
npm run test:deploy (5-10ë¶„, Docker í•„ìš”)
   â†“
í†µê³¼í•˜ë©´
   â†“
git push origin main
```

### í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬

Railwayì—ì„œ í™˜ê²½ë³€ìˆ˜ ë³€ê²½ ì‹œ ì¦‰ì‹œ ì—…ë°ì´íŠ¸:

```bash
npm run test:deploy:update
# Railway í™˜ê²½ë³€ìˆ˜ ë¶™ì—¬ë„£ê¸°
# Ctrl+Dë¡œ ì™„ë£Œ
```

---

## CI/CD í†µí•©

### GitHub Actions ì˜ˆì‹œ

```yaml
name: Docker Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'

      - name: Quick Dependency Test
        run: npm run test:deps

      - name: Build Docker Image
        run: docker build -f Dockerfile.test -t test .

      - name: Run Deployment Tests
        run: npm run test:deploy
        env:
          # Railway í™˜ê²½ë³€ìˆ˜ë¥¼ GitHub Secretsì—ì„œ ë¡œë“œ
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
          SESSION_SECRET: ${{ secrets.SESSION_SECRET }}
          JWT_PRIVATE_KEY: ${{ secrets.JWT_PRIVATE_KEY }}
          JWT_PUBLIC_KEY: ${{ secrets.JWT_PUBLIC_KEY }}
```

---

## ë‹¤ìŒ ë‹¨ê³„

### ì¼ë°˜ í…ŒìŠ¤íŠ¸ í†µê³¼ í›„

**ì¼ë°˜ì ì¸ ë³€ê²½:**
```bash
# Railway ë°°í¬
git push origin main
```

**SSO ê´€ë ¨ ë³€ê²½:**
```bash
# SSO í…ŒìŠ¤íŠ¸ ì‹¤í–‰
node scripts/docker-sso-test.cjs
# ë˜ëŠ” SSOí…ŒìŠ¤íŠ¸.md ì°¸ì¡°
```

**ì¤‘ìš”í•œ ë³€ê²½ (ë¦¬íŒ©í† ë§, ì•„í‚¤í…ì²˜ ë³€ê²½):**
```bash
# ì •ë°€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
node scripts/docker-advanced-test.cjs
npm run test:railway
# ë˜ëŠ” ì •ë°€í…ŒìŠ¤íŠ¸.md ì°¸ì¡°
```

---

## ì°¸ê³  ë¬¸ì„œ

- **[SSOí…ŒìŠ¤íŠ¸.md](./SSOí…ŒìŠ¤íŠ¸.md)** - Hub ê°„ SSO ì¸ì¦ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- **[ì •ë°€í…ŒìŠ¤íŠ¸.md](./ì •ë°€í…ŒìŠ¤íŠ¸.md)** - ì™„ì „í•œ ì˜í–¥ë„ ë¶„ì„ ë° ê²€ì¦
- **[railway-docker-test-guide.md](./railway-docker-test-guide.md)** - Railway í™˜ê²½ ìƒì„¸ ê°€ì´ë“œ

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

ë°°í¬ ì „ ì´ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”:

- [ ] TypeScript íƒ€ì… ì²´í¬ í†µê³¼ (backend & frontend)
- [ ] Docker ë¹Œë“œ ì„±ê³µ
- [ ] Health Check í†µê³¼ (`/api/health` ì‘ë‹µ ì •ìƒ)
- [ ] í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ 8ê°œ ëª¨ë‘ ë¡œë“œ í™•ì¸
- [ ] ìµœì‹  ì½”ë“œê°€ `main` ë¸Œëœì¹˜ì— ë³‘í•©ë¨
- [ ] `common/railway-env.md`ê°€ ìµœì‹  ìƒíƒœ

**ëª¨ë‘ ì²´í¬ë˜ë©´ Railway ë°°í¬ë¥¼ ì§„í–‰í•˜ì„¸ìš”!** ğŸš€

---

## ë²„ì „ íˆìŠ¤í† ë¦¬

| ë‚ ì§œ | ë³€ê²½ ë‚´ìš© | ì‘ì„±ì |
|------|----------|--------|
| 2025-12-31 | ì´ˆê¸° ë²„ì „ ì‘ì„± | Claude Code |
