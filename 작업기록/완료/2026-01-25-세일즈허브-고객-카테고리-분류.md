# 세일즈허브 고객 카테고리 분류 및 아이콘 표시 수정

**날짜**: 2026. 01. 25. 15:30
**프로젝트**: WBSalesHub
**작업 유형**: 데이터 정리 + 버그 수정

---

## 작업 개요

세일즈허브에 등록된 전체 고객(22개)의 카테고리를 웹 검색을 통해 분류하고, 고객 상세 페이지에서 카테고리 아이콘이 표시되지 않던 버그를 수정했습니다.

---

## 1. 고객 카테고리 분류

### 현황
- **전체 고객**: 22개 (모두 `category_level1: 공통`, `category_level2: 공통`으로 미분류)
- **분류 대상**: 법인 14개
- **제외**: 개인 고객 6개 (강창호, 김진호, 우범진, 이돈구, 최은규x2)
- **삭제**: 테스트 데이터 2개 (Client, 테스트 주식회사)

### 작업 프로세스

#### Step 1: 테스트 데이터 삭제
```sql
DELETE FROM customers WHERE company_name IN ('Client', '테스트 주식회사');
-- 2건 삭제 완료
```

#### Step 2: 웹 검색으로 사업 분야 파악
14개 법인에 대해 네이버/구글 검색을 통해 사업 분야 조사:

| 회사명 | 사업 분야 | 출처 |
|--------|----------|------|
| 두나무 주식회사 | 가상자산 거래소 (업비트) | 공식 웹사이트 |
| 주식회사 코빗 | 가상자산 거래소 (한국 최초) | 공식 웹사이트 |
| (주)웨이브릿지 | 디지털자산 프라임 브로커리지 | VASP 라이선스 취득 |
| 미래에셋자산운용 | 자산운용 (ETF, 펀드) | 공식 웹사이트 |
| 주식회사 비트플래닛 | 비트코인 트레저리, SI/IT | 사업 내용 |
| (주) 이노그리드 | 클라우드 솔루션 | 국내 대표 클라우드 기업 |
| 주식회사 파라메타 | 블록체인 인프라 (구 아이콘루프) | 루프체인, 공공 블록체인 |
| 에이포엑스 주식회사 | 블록체인 밸리데이터 | 사업 내용 |
| 온블록 | 블록체인 인프라 (그노랜드) | 사업 내용 |
| 트래블 월렛 | 외환 핀테크 (환전/송금) | 사업 내용 |
| 해시드 벤처투자조합1,2,3호 | 블록체인 전문 VC | 투자조합 |
| 맥스인포텍 | IT | (검색 결과 없음, 사용자 확인) |

#### Step 3: 카테고리 분류
```sql
-- 두나무 (VASP)
UPDATE customers SET category_level1 = 'Prime', category_level2 = 'VASP',
  business_area = '가상자산 거래소', updated_at = NOW()
WHERE company_name = '두나무 주식회사';

-- 코빗 (VASP)
UPDATE customers SET category_level1 = 'Prime', category_level2 = 'VASP',
  business_area = '가상자산 거래소', updated_at = NOW()
WHERE company_name = '주식회사 코빗';

-- 웨이브릿지 (VASP)
UPDATE customers SET category_level1 = 'Prime', category_level2 = 'VASP',
  business_area = '디지털자산 중개', updated_at = NOW()
WHERE company_name = '(주)웨이브릿지';

-- 미래에셋자산운용 (ETF)
UPDATE customers SET category_level1 = 'Prime', category_level2 = 'ETF',
  business_area = '자산운용', updated_at = NOW()
WHERE company_name = '미래에셋자산운용';

-- 비트플래닛 (DAT)
UPDATE customers SET category_level1 = 'Prime', category_level2 = 'DAT',
  business_area = '비트코인 트레저리', updated_at = NOW()
WHERE company_name = '주식회사 비트플래닛';

-- 이노그리드 (일반법인)
UPDATE customers SET category_level1 = 'Prime', category_level2 = '일반법인',
  business_area = '클라우드/IT', updated_at = NOW()
WHERE company_name = '(주) 이노그리드';

-- 파라메타 (일반법인)
UPDATE customers SET category_level1 = 'Prime', category_level2 = '일반법인',
  business_area = '블록체인 인프라', updated_at = NOW()
WHERE company_name = '주식회사 파라메타';

-- 에이포엑스 (일반법인)
UPDATE customers SET category_level1 = 'Prime', category_level2 = '일반법인',
  business_area = '블록체인 인프라', updated_at = NOW()
WHERE company_name = '에이포엑스 주식회사';

-- 온블록 (일반법인)
UPDATE customers SET category_level1 = 'Prime', category_level2 = '일반법인',
  business_area = '블록체인 인프라', updated_at = NOW()
WHERE company_name = '온블록';

-- 맥스인포텍 (일반법인)
UPDATE customers SET category_level1 = 'Prime', category_level2 = '일반법인',
  business_area = 'IT', updated_at = NOW()
WHERE company_name = '맥스인포텍';

-- 트래블 월렛 (PG)
UPDATE customers SET category_level1 = 'Pay', category_level2 = 'PG',
  business_area = '외환/핀테크', updated_at = NOW()
WHERE company_name = '트래블 월렛';

-- 해시드 벤처투자조합 1,2,3호 (WSP/기타)
UPDATE customers SET category_level1 = 'WSP', category_level2 = '기타',
  business_area = '벤처투자', updated_at = NOW()
WHERE company_name LIKE '해시드 벤처투자조합%';
```

### 최종 결과

**카테고리별 고객 분포**:

| Level1 | Level2 | 고객 수 | 회사명 |
|--------|--------|---------|--------|
| **Pay** | PG | 1 | 트래블 월렛 |
| **Prime** | DAT | 1 | 비트플래닛 |
| **Prime** | ETF | 1 | 미래에셋자산운용 |
| **Prime** | VASP | 3 | 두나무, 코빗, 웨이브릿지 |
| **Prime** | 일반법인 | 5 | 이노그리드, 맥스인포텍, 에이포엑스, 온블록, 파라메타 |
| **WSP** | 기타 | 3 | 해시드 벤처투자조합 1,2,3호 |
| **공통** | 공통 | 6 | 개인 고객 (분류 제외) |

**총 고객**: 20개 (22 - 삭제 2건)

---

## 2. CategoryIcon 표시 버그 수정

### 문제
- 고객 상세 페이지에서 로고가 없을 때 CategoryIcon이 표시되지 않음
- `LogoUpload` 컴포넌트의 버튼 배경색(`bg-primary/10`)이 CategoryIcon 위에 겹쳐서 가려짐

### 원인
```tsx
// 버그 코드
<button className="... bg-primary/10">  // 반투명 파란 배경
  <CategoryIcon size="lg" />  // 자체 원형 배경 + 아이콘
</button>
```

버튼의 `bg-primary/10` 배경과 CategoryIcon의 원형 배경이 겹치면서 표시 문제 발생

### 수정
```tsx
// 수정 후
<button className={cn(
  '...',
  previewUrl ? 'bg-white border' : '',  // 로고 없으면 배경 제거
  ...
)}>
  <CategoryIcon size="lg" />
</button>
```

**수정 파일**: `/home/peterchung/WBSalesHub/frontend/components/customers/LogoUpload.tsx` (128행)

### 결과
- 로고가 있는 고객: 흰 배경 + 로고 이미지
- 로고가 없는 고객: CategoryIcon의 원형 배경색 + 아이콘이 정상 표시

---

## 검증

### DB 확인
```sql
SELECT category_level1, category_level2, COUNT(*)
FROM customers
GROUP BY category_level1, category_level2;
```

결과: 7개 카테고리 조합, 총 20개 고객

### UI 확인
- ✅ 고객 목록 테이블에서 카테고리 아이콘 표시
- ✅ 고객 상세 페이지에서 LogoUpload 영역에 아이콘 표시
- ✅ 카테고리별 색상 구분 (VASP=indigo, ETF=blue, DAT=sky, 일반법인=blue, PG=green, 기타=gray)

---

## 영향 범위

### 수정된 파일
1. **프론트엔드**: `WBSalesHub/frontend/components/customers/LogoUpload.tsx` (1줄)
2. **데이터베이스**: `wbsaleshub.customers` 테이블 (16건 변경: DELETE 2, UPDATE 14)

### 연관 컴포넌트
- `CategoryIcon.tsx`: 변경 없음 (기존 구현 그대로 사용)
- `CustomerDetail.tsx`: 변경 없음
- `CustomerTable.tsx`: 변경 없음

---

## 참고 링크

### 웹 검색 출처
- [이노그리드 - 국내 대표 클라우드 솔루션 전문기업](https://www.innogrid.com/)
- [웨이브릿지 - 디지털 자산 투자의 게이트웨이](https://wavebridge.com/ko)
- [파라메타 - 웹3 기술 기업](https://parametacorp.com/)

### 관련 문서
- 카테고리 체계: `WBSalesHub/frontend/types/category.ts`
- API: `GET /api/customers` (category_level1, category_level2 필드)

---

## 후속 작업

### 권장 사항
1. **로고 업로드 안내**: 각 회사 담당자에게 공식 로고 업로드 요청
2. **카테고리 검증**: 특히 '기타'로 분류된 회사들의 세부 카테고리 재검토
3. **business_area 활용**: 고객 필터링, 통계, 리포트에 활용 가능

### 개선 아이디어
- 카테고리별 고객 통계 대시보드
- 자동 카테고리 추천 (AI 기반 사업자등록증/웹사이트 분석)
- 카테고리 변경 히스토리 추적

---

**작업 시간**: 약 1시간
**작업자**: Claude (AI Agent)
