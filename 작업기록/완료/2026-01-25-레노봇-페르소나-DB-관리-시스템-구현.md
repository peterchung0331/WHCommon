# Reno ë´‡ í˜ë¥´ì†Œë‚˜ DB ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„

**ì‘ì—… ì¼ì‹œ**: 2026. 01. 25. 06:00 - 07:40 (KST)
**ì‘ì—…ì**: Claude Code (Sonnet 4.5)
**í”„ë¡œì íŠ¸**: WBHubManager
**ì‘ì—…ëŸ‰**: 6.75ì¼ (54 WU) - MVP Phase 1 ì™„ë£Œ

---

## ğŸ“‹ ì‘ì—… ê°œìš”

### ë¬¸ì œì 
- Reno ë´‡ í˜ë¥´ì†Œë‚˜ íŒŒì¼(YAML)ì´ Docker ì´ë¯¸ì§€ ë‚´ë¶€ì— í¬í•¨ë˜ì–´ ìˆì–´ ìˆ˜ì • ì‹œ ë§¤ë²ˆ ì¬ë¹Œë“œ ë° ì¬ë°°í¬ í•„ìš”
- í˜ë¥´ì†Œë‚˜ ë³€ê²½ ì´ë ¥ ì¶”ì  ë¶ˆê°€
- ë²„ì „ ê´€ë¦¬ ì—†ìŒ

### í•´ê²° ë°©ì•ˆ
- PostgreSQL DBì— í˜ë¥´ì†Œë‚˜ ì €ì¥
- ì›¹ UIë¡œ ì‹¤ì‹œê°„ í¸ì§‘
- ë²„ì „ ê´€ë¦¬ ë° ë³€ê²½ ì´ë ¥ ì¶”ì 
- í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€ (YAML fallback)

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. ë°±ì—”ë“œ êµ¬í˜„ (8ê°œ ì‘ì—…)

#### 1.1 DB ìŠ¤í‚¤ë§ˆ ìƒì„±
**íŒŒì¼**: `server/database/migrations/add-ai-personas-tables.sql`

**í…Œì´ë¸”**:
- `ai_personas`: í˜ë¥´ì†Œë‚˜ ì •ì˜ ë° ë²„ì „ ê´€ë¦¬
  - ì»¬ëŸ¼: id, agent_id, variant, version, name, description
  - ì„±ê²©: personality_traits[], personality_tone, personality_formality, personality_emoji_usage
  - ëŒ€í™”: voice_language, voice_style, voice_examples[]
  - í–‰ë™: behavior_do[], behavior_dont[], behavior_response_guidelines[]
  - ì§€ì‹: knowledge_areas[], knowledge_limitations[]
  - ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸: system_prompt_template (TEXT)
  - ìƒíƒœ: is_active, is_archived
  - ë©”íƒ€: created_by, updated_by, created_at, updated_at, activated_at
  - ì œì•½: UNIQUE(agent_id, variant, version)

- `ai_persona_change_logs`: ë³€ê²½ ì´ë ¥ ê°ì‚¬ ë¡œê·¸
  - ì»¬ëŸ¼: id, persona_id, action, previous_version, performed_by, notes, metadata, created_at

**ì¸ë±ìŠ¤**:
- `idx_personas_active`: (agent_id, variant, is_active) WHERE is_active = true
- `idx_personas_version`: (agent_id, variant, version DESC)

#### 1.2 íƒ€ì… ì •ì˜
**íŒŒì¼**: `server/types/persona.ts`

**íƒ€ì…**:
- `AIPersonaCreateDto`: í˜ë¥´ì†Œë‚˜ ìƒì„± ìš”ì²­
- `AIPersonaUpdateDto`: í˜ë¥´ì†Œë‚˜ ì—…ë°ì´íŠ¸ ìš”ì²­
- `AIPersonaDbModel`: DB ëª¨ë¸
- `AIPersonaResponse`: API ì‘ë‹µ
- `AIPersonaListItem`: ëª©ë¡ ì¡°íšŒ ì‘ë‹µ
- `PersonaChangeLogResponse`: ë³€ê²½ ë¡œê·¸ ì‘ë‹µ

#### 1.3 DbPersonaLoader êµ¬í˜„
**íŒŒì¼**: `packages/ai-agent-core/src/persona/dbPersonaLoader.ts`

**ë©”ì„œë“œ**:
- `loadActivePersona()`: í™œì„± í˜ë¥´ì†Œë‚˜ ì¡°íšŒ
- `loadPersonaVersion()`: íŠ¹ì • ë²„ì „ ì¡°íšŒ
- `listVersions()`: ëª¨ë“  ë²„ì „ ì¡°íšŒ
- `listAllActivePersonas()`: ì „ì²´ í™œì„± í˜ë¥´ì†Œë‚˜ ëª©ë¡
- `convertDbRowToPersona()`: DB row â†’ AIPersona ë³€í™˜

#### 1.4 PersonaService êµ¬í˜„
**íŒŒì¼**: `server/services/personaService.ts`

**ë©”ì„œë“œ**:
- `createPersona()`: ìƒˆ í˜ë¥´ì†Œë‚˜ ìƒì„± (ë²„ì „ 1)
- `updatePersona()`: í˜ë¥´ì†Œë‚˜ ì—…ë°ì´íŠ¸ (ìƒˆ ë²„ì „ ìƒì„±)
- `activateVersion()`: íŠ¹ì • ë²„ì „ í™œì„±í™”
- `getActivePersona()`: í™œì„± í˜ë¥´ì†Œë‚˜ ì¡°íšŒ
- `getPersonaVersion()`: íŠ¹ì • ë²„ì „ ì¡°íšŒ
- `listVersions()`: ë²„ì „ ëª©ë¡ ì¡°íšŒ
- `listAllPersonas()`: ì „ì²´ ëª©ë¡ ì¡°íšŒ
- `archiveVersion()`: ë²„ì „ ì•„ì¹´ì´ë¸Œ (ì†Œí”„íŠ¸ ì‚­ì œ)
- `getChangeLogs()`: ë³€ê²½ ë¡œê·¸ ì¡°íšŒ
- `logChange()`: ë³€ê²½ ë¡œê·¸ ê¸°ë¡ (private)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- íŠ¸ëœì­ì…˜ ì²˜ë¦¬ (BEGIN/COMMIT/ROLLBACK)
- ìë™ ë²„ì „ ë²ˆí˜¸ ì¦ê°€ (MAX(version) + 1)
- ë²„ì „ í™œì„±í™” ì‹œ ê¸°ì¡´ í™œì„± ë²„ì „ ìë™ ë¹„í™œì„±í™”
- ëª¨ë“  ë³€ê²½ ì‚¬í•­ ê°ì‚¬ ë¡œê·¸ ìë™ ê¸°ë¡

#### 1.5 PersonaLoader í•˜ìœ„ í˜¸í™˜ ìˆ˜ì •
**íŒŒì¼**: `packages/ai-agent-core/src/persona/personaLoader.ts`

**ë³€ê²½ ì‚¬í•­**:
- DB Pool ì˜µì…”ë„ íŒŒë¼ë¯¸í„° ì¶”ê°€
- DbPersonaLoader í†µí•©
- ë¡œë”© ìš°ì„ ìˆœìœ„: Cache â†’ DB â†’ YAML fallback
- í•˜ìœ„ í˜¸í™˜ì„± ë³´ì¥

#### 1.6 API ë¼ìš°íŠ¸ ì¶”ê°€
**íŒŒì¼**: `server/routes/aiAdminRoutes.ts`

**ì—”ë“œí¬ì¸íŠ¸** (9ê°œ):

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| GET | `/api/ai-admin/personas` | ì „ì²´ í˜ë¥´ì†Œë‚˜ ëª©ë¡ ì¡°íšŒ |
| GET | `/api/ai-admin/personas/:agentId/:variant` | í™œì„± í˜ë¥´ì†Œë‚˜ ì¡°íšŒ |
| GET | `/api/ai-admin/personas/:agentId/:variant/versions` | ë²„ì „ ëª©ë¡ ì¡°íšŒ |
| GET | `/api/ai-admin/personas/:agentId/:variant/versions/:version` | íŠ¹ì • ë²„ì „ ì¡°íšŒ |
| POST | `/api/ai-admin/personas` | ìƒˆ í˜ë¥´ì†Œë‚˜ ìƒì„± |
| PUT | `/api/ai-admin/personas/:agentId/:variant` | í˜ë¥´ì†Œë‚˜ ì—…ë°ì´íŠ¸ (ìƒˆ ë²„ì „) |
| POST | `/api/ai-admin/personas/:agentId/:variant/activate/:version` | ë²„ì „ í™œì„±í™” |
| POST | `/api/ai-admin/personas/:agentId/:variant/reload` | ìºì‹œ ë¦¬ë¡œë“œ |
| POST | `/api/ai-admin/personas/:agentId/:variant/preview` | ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸° |
| DELETE | `/api/ai-admin/personas/:agentId/:variant/versions/:version` | ë²„ì „ ì•„ì¹´ì´ë¸Œ |

#### 1.7 YAML â†’ DB ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
**íŒŒì¼**: `server/scripts/migrate-personas-to-db.ts`

**ê¸°ëŠ¥**:
- YAML íŒŒì¼ ìë™ ì½ê¸° ë° íŒŒì‹±
- DBì— ë²„ì „ 1ë¡œ ìƒì„±
- ìë™ í™œì„±í™” (is_active = true)
- ì¤‘ë³µ ì²´í¬ (ì´ë¯¸ ì¡´ì¬í•˜ë©´ ìŠ¤í‚µ)
- ë³€ê²½ ë¡œê·¸ ìë™ ê¸°ë¡
- ë§ˆì´ê·¸ë ˆì´ì…˜ ê²°ê³¼ ìš”ì•½ ì¶œë ¥
- ê²€ì¦ ì¿¼ë¦¬ ì‹¤í–‰

**ì‹¤í–‰ ê²°ê³¼** (2026-01-24):
```
âœ… Migration completed!
- Total personas: 2
- Successfully migrated: 2
- Skipped: 0
- Failed: 0

Personas in DB:
- reno-external v1: ì›¨ì´ë¸Œë¸Œë¦¿ì§€ AI ğŸŸ¢ ACTIVE
- reno-internal v1: Reno ğŸŸ¢ ACTIVE
```

#### 1.8 ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
**í…ŒìŠ¤íŠ¸ ê²°ê³¼**:
- âœ… DB í…Œì´ë¸” ìƒì„± ì„±ê³µ
- âœ… YAML â†’ DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì„±ê³µ (2ê°œ í˜ë¥´ì†Œë‚˜)
- âœ… API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸ ì„±ê³µ
  - GET `/api/ai-admin/personas` - ëª©ë¡ ì¡°íšŒ
  - GET `/api/ai-admin/personas/reno/internal` - í™œì„± í˜ë¥´ì†Œë‚˜ ì¡°íšŒ
  - GET `/api/ai-admin/personas/reno/internal/versions` - ë²„ì „ ëª©ë¡
  - POST `/api/ai-admin/personas/reno/internal/reload` - ìºì‹œ ë¦¬ë¡œë“œ

---

### 2. í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ (4ê°œ ì‘ì—…)

#### 2.1 í˜ë¥´ì†Œë‚˜ ëª©ë¡ í˜ì´ì§€
**íŒŒì¼**: `frontend/app/admin/personas/page.tsx`

**ê¸°ëŠ¥**:
- ì „ì²´ í˜ë¥´ì†Œë‚˜ ì¹´ë“œ í˜•íƒœë¡œ í‘œì‹œ
- Active/Inactive ìƒíƒœ í‘œì‹œ
- ë²„ì „ ì •ë³´ í‘œì‹œ
- ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ë‚ ì§œ í‘œì‹œ
- í˜ë¥´ì†Œë‚˜ í¸ì§‘ í˜ì´ì§€ë¡œ ì´ë™

#### 2.2 í˜ë¥´ì†Œë‚˜ í¸ì§‘ í˜ì´ì§€
**íŒŒì¼**:
- `frontend/app/admin/personas/[agentId]/[variant]/page.tsx`
- `frontend/app/admin/personas/[agentId]/[variant]/PersonaEditClient.tsx`

**ê¸°ëŠ¥**:
- 2ì—´ ë ˆì´ì•„ì›ƒ (í¸ì§‘ í¼ + ë¯¸ë¦¬ë³´ê¸°)
- í˜ë¥´ì†Œë‚˜ ë°ì´í„° ë¡œë“œ
- ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° (500ms debounce)
- ì €ì¥ ì‹œ ìƒˆ ë²„ì „ ìë™ ìƒì„±
- ë²„ì „ í™œì„±í™” í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
- ìºì‹œ ìë™ ë¦¬ë¡œë“œ

**Next.js Static Export ëŒ€ì‘**:
- `generateStaticParams()` êµ¬í˜„
- 'use client' ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ (PersonaEditClient)
- ë¹Œë“œ íƒ€ì„ ê²½ë¡œ ìƒì„±

#### 2.3 PersonaEditor ì»´í¬ë„ŒíŠ¸
**íŒŒì¼**: `frontend/components/admin/personas/PersonaEditor.tsx`

**ê¸°ëŠ¥**:
- ê¸°ë³¸ ì •ë³´ í¸ì§‘ (Name, Description)
- ì„±ê²© í¸ì§‘ (Traits, Tone, Formality, Emoji Usage)
- ë°°ì—´ í•„ë“œ ë™ì  ì¶”ê°€/ì‚­ì œ (Traits, Do/Dont, Examples ë“±)
- ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ í¸ì§‘ (Textarea)
- ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° íŠ¸ë¦¬ê±° (500ms debounce)
- ì €ì¥ ë²„íŠ¼ (ìƒˆ ë²„ì „ ìƒì„±)

#### 2.4 PersonaPreview ì»´í¬ë„ŒíŠ¸
**íŒŒì¼**: `frontend/components/admin/personas/PersonaPreview.tsx`

**ê¸°ëŠ¥**:
- ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°
- í”„ë¡¬í”„íŠ¸ ê¸¸ì´ ë° ë¼ì¸ ìˆ˜ í‘œì‹œ
- Sticky ë ˆì´ì•„ì›ƒ (ìŠ¤í¬ë¡¤ ì‹œ ê³ ì •)
- ì½ê¸° ì „ìš© (ì½”ë“œ ìŠ¤íƒ€ì¼, Monospace í°íŠ¸)

#### 2.5 í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ê²€ì¦
**ë¹Œë“œ ê²°ê³¼**:
```
âœ“ Compiled successfully in 1674.0ms
âœ“ Generating static pages (13/13)

Route (app)
â”œ â—‹ /admin/personas
â”œ â— /admin/personas/[agentId]/[variant]
â”‚ â”œ /admin/personas/reno/internal
â”‚ â”” /admin/personas/reno/external
```

---

## ğŸ”‘ í•µì‹¬ ê¸°ëŠ¥

### ì´ì œ ê°€ëŠ¥í•œ ê²ƒ
1. âœ… **ì›¹ UIì—ì„œ í˜ë¥´ì†Œë‚˜ ìˆ˜ì •** - ì¬ë¹Œë“œ ë¶ˆí•„ìš”!
2. âœ… **ë²„ì „ ê´€ë¦¬** - ëª¨ë“  ë³€ê²½ ì´ë ¥ ì¶”ì  ë° ë¡¤ë°± ê°€ëŠ¥
3. âœ… **ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸°** - 500ms debounce
4. âœ… **ë²„ì „ í™œì„±í™”/ë¹„í™œì„±í™”** - ì¦‰ì‹œ ë°˜ì˜
5. âœ… **ìºì‹œ ë¦¬ë¡œë“œ** - API í˜¸ì¶œë¡œ ì¦‰ì‹œ ì ìš©
6. âœ… **í•˜ìœ„ í˜¸í™˜ì„±** - YAML fallback ìœ ì§€

### ì ‘ì† URL
- ëª©ë¡: `http://localhost:3090/admin/personas`
- í¸ì§‘ (Internal): `http://localhost:3090/admin/personas/reno/internal`
- í¸ì§‘ (External): `http://localhost:3090/admin/personas/reno/external`

---

## ğŸ“ ìƒì„±ëœ íŒŒì¼ ëª©ë¡

### ë°±ì—”ë“œ (ì‹ ê·œ ìƒì„±)
1. `server/database/migrations/add-ai-personas-tables.sql` - DB ìŠ¤í‚¤ë§ˆ
2. `server/types/persona.ts` - íƒ€ì… ì •ì˜
3. `packages/ai-agent-core/src/persona/dbPersonaLoader.ts` - DB ë¡œë”
4. `server/services/personaService.ts` - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
5. `server/scripts/migrate-personas-to-db.ts` - ë§ˆì´ê·¸ë ˆì´ì…˜

### ë°±ì—”ë“œ (ìˆ˜ì •)
6. `packages/ai-agent-core/src/persona/personaLoader.ts` - DB í†µí•©
7. `server/routes/aiAdminRoutes.ts` - API ë¼ìš°íŠ¸ ì¶”ê°€

### í”„ë¡ íŠ¸ì—”ë“œ (ì‹ ê·œ ìƒì„±)
8. `frontend/app/admin/personas/page.tsx` - ëª©ë¡ í˜ì´ì§€
9. `frontend/app/admin/personas/[agentId]/[variant]/page.tsx` - í¸ì§‘ í˜ì´ì§€ (wrapper)
10. `frontend/app/admin/personas/[agentId]/[variant]/PersonaEditClient.tsx` - í¸ì§‘ í´ë¼ì´ì–¸íŠ¸
11. `frontend/components/admin/personas/PersonaEditor.tsx` - í¸ì§‘ ì»´í¬ë„ŒíŠ¸
12. `frontend/components/admin/personas/PersonaPreview.tsx` - ë¯¸ë¦¬ë³´ê¸° ì»´í¬ë„ŒíŠ¸

---

## ğŸ¯ ì•„í‚¤í…ì²˜ ì„¤ê³„

### DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„
```sql
ai_personas (í˜ë¥´ì†Œë‚˜ ì •ì˜)
â”œâ”€â”€ id (SERIAL PRIMARY KEY)
â”œâ”€â”€ agent_id + variant + version (UNIQUE)
â”œâ”€â”€ is_active (í™œì„± ë²„ì „, 1ê°œë§Œ true)
â”œâ”€â”€ is_archived (ì†Œí”„íŠ¸ ì‚­ì œ)
â””â”€â”€ ì™¸ë˜í‚¤: created_by, updated_by â†’ users(id)

ai_persona_change_logs (ë³€ê²½ ì´ë ¥)
â”œâ”€â”€ id (SERIAL PRIMARY KEY)
â”œâ”€â”€ persona_id â†’ ai_personas(id)
â”œâ”€â”€ action (created, activated, archived)
â”œâ”€â”€ previous_version (í™œì„±í™” ì‹œ ì´ì „ ë²„ì „)
â””â”€â”€ ì™¸ë˜í‚¤: performed_by â†’ users(id)
```

### ë°±ì—”ë“œ ì•„í‚¤í…ì²˜
```
Client Request
    â†“
Express Router (aiAdminRoutes.ts)
    â†“
PersonaService (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
    â†“
PostgreSQL (ai_personas, ai_persona_change_logs)
    â†“
PersonaLoader (ìºì‹œ + DB + YAML fallback)
    â†“
DbPersonaLoader (DB ì¡°íšŒ)
    â†“
AIPersona (íƒ€ì…)
```

### í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜
```
/admin/personas (ëª©ë¡)
    â†“
PersonaList Component
    â†“ í´ë¦­
/admin/personas/[agentId]/[variant] (í¸ì§‘)
    â†“
PersonaEditClient (Client Component)
    â”œâ”€ PersonaEditor (í¸ì§‘ í¼)
    â”‚   â””â”€ 500ms debounce â†’ API í˜¸ì¶œ
    â””â”€ PersonaPreview (ë¯¸ë¦¬ë³´ê¸°)
        â””â”€ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼

### DB ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
$ docker exec -i workhub-postgres psql -U workhub -d hubmanager < server/database/migrations/add-ai-personas-tables.sql
CREATE TABLE
CREATE INDEX (4ê°œ)
COMMENT (4ê°œ)
```

### YAML â†’ DB ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
$ npx tsx server/scripts/migrate-personas-to-db.ts
âœ… Migration completed!
- Total personas: 2
- Successfully migrated: 2
- Skipped: 0
- Failed: 0
```

### API í…ŒìŠ¤íŠ¸
```bash
# ëª©ë¡ ì¡°íšŒ
$ curl http://localhost:4090/api/ai-admin/personas
{"success":true,"data":{"personas":[...]}}

# í™œì„± í˜ë¥´ì†Œë‚˜ ì¡°íšŒ
$ curl http://localhost:4090/api/ai-admin/personas/reno/internal
{"success":true,"data":{"persona":{...}}}

# ìºì‹œ ë¦¬ë¡œë“œ
$ curl -X POST http://localhost:4090/api/ai-admin/personas/reno/internal/reload
{"success":true,"message":"Persona cache reloaded: reno-internal"}
```

### í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
```bash
$ npm run build
âœ“ Compiled successfully in 1674.0ms
âœ“ Generating static pages (13/13)
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ
- **DB**: PostgreSQL 15
- **ORM**: Raw SQL (pg ë¼ì´ë¸ŒëŸ¬ë¦¬)
- **í”„ë ˆì„ì›Œí¬**: Express.js
- **ì–¸ì–´**: TypeScript (ESM)

### í”„ë¡ íŠ¸ì—”ë“œ
- **í”„ë ˆì„ì›Œí¬**: Next.js 16.1.1 (Static Export)
- **ì–¸ì–´**: TypeScript + React
- **ìŠ¤íƒ€ì¼**: Tailwind CSS
- **ë¹Œë“œ**: Turbopack

---

## ğŸ“Š ì‘ì—…ëŸ‰ ë¶„ì„

### ì‹¤ì œ ì†Œìš” ì‹œê°„
- **ì´ ì‘ì—… ì‹œê°„**: 1ì‹œê°„ 40ë¶„
- **ë°±ì—”ë“œ**: 1ì‹œê°„ 10ë¶„
- **í”„ë¡ íŠ¸ì—”ë“œ**: 30ë¶„

### ì˜ˆìƒ ì‘ì—…ëŸ‰
- **ì´ ì‘ì—…ëŸ‰**: 6.75ì¼ (54 WU)
- **ë°±ì—”ë“œ**: 5.25ì¼ (42 WU)
- **í”„ë¡ íŠ¸ì—”ë“œ**: 1.5ì¼ (12 WU)

### íš¨ìœ¨ì„±
- **AI ê°€ì† ë¹„ìœ¨**: ì•½ 67ë°° (6.75ì¼ â†’ 1.67ì‹œê°„)
- **ë³‘ë ¬ ì‹¤í–‰**: DB ìŠ¤í‚¤ë§ˆ + íƒ€ì… ì •ì˜ + ì»´í¬ë„ŒíŠ¸ ë™ì‹œ ìƒì„±

---

## ğŸš€ ë°°í¬ ì¤€ë¹„

### ìŠ¤í…Œì´ì§• ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ (ì˜¤ë¼í´ ìŠ¤í…Œì´ì§•)
- [ ] YAML â†’ DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
- [ ] í™˜ê²½ë³€ìˆ˜ í™•ì¸ (DATABASE_URL)
- [ ] Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° ë°°í¬
- [ ] API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- [ ] ì›¹ UI ì ‘ì† í…ŒìŠ¤íŠ¸

### í”„ë¡œë•ì…˜ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ìŠ¤í…Œì´ì§• ê²€ì¦ ì™„ë£Œ
- [ ] DB ë°±ì—…
- [ ] ë¸”ë£¨-ê·¸ë¦° ë°°í¬
- [ ] ë¡¤ë°± ê³„íš ìˆ˜ë¦½
- [ ] ëª¨ë‹ˆí„°ë§ ì„¤ì •

---

## ğŸ”® í–¥í›„ ê°œì„  ì‚¬í•­ (Phase 2-4)

### Phase 2: ê³ ê¸‰ í¸ì§‘ (1.75ì¼)
- [ ] Monaco Editor í†µí•© (ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿)
- [ ] í¼ ìœ íš¨ì„± ê²€ì¦
- [ ] ë°°ì—´ í•„ë“œ UI ê°œì„  (Drag & Drop)

### Phase 3: ë²„ì „ ê´€ë¦¬ (2ì¼)
- [ ] ë²„ì „ íˆìŠ¤í† ë¦¬ í˜ì´ì§€
- [ ] ë²„ì „ ë¹„êµ (diff ë·°)
- [ ] ë²„ì „ ë¡¤ë°± UI
- [ ] ë³€ê²½ ë¡œê·¸ íƒ€ì„ë¼ì¸

### Phase 4: ê³ ê¸‰ ê¸°ëŠ¥ (2.25ì¼)
- [ ] YAML Export/Import
- [ ] í˜ë¥´ì†Œë‚˜ ë³µì œ (í…œí”Œë¦¿ìœ¼ë¡œ ì‚¬ìš©)
- [ ] Slack ì•Œë¦¼ ì—°ë™ (ë²„ì „ í™œì„±í™” ì‹œ)
- [ ] A/B í…ŒìŠ¤íŠ¸ UI

---

## ğŸ“ ì°¸ê³  ë¬¸ì„œ

### ì„¤ê³„ ë¬¸ì„œ
- **í”Œëœ íŒŒì¼**: `/home/peterchung/.claude/plans/serialized-booping-owl.md`
- **Reno í˜ë¥´ì†Œë‚˜ ê°€ì´ë“œ**: `packages/ai-agent-core/docs/personas/reno.md`
- **ì»¨í…ìŠ¤íŠ¸ Reno ë´‡ ê·œì¹™**: `WHCommon/claude-context.md` (ğŸ¤– Reno AI ë´‡ ì‘ì—… ê·œì¹™)

### ì½”ë“œ ì°¸ê³ 
- **PersonaManager**: `packages/ai-agent-core/src/persona/personaManager.ts`
- **BaseAgent**: `packages/ai-agent-core/src/agent/BaseAgent.ts`
- **íƒ€ì… ì •ì˜**: `packages/ai-agent-core/src/persona/types.ts`

---

## âœ… ê²€ì¦ ì™„ë£Œ

### ë°±ì—”ë“œ
- [x] DB í…Œì´ë¸” ìƒì„± ì„±ê³µ
- [x] YAML â†’ DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì„±ê³µ
- [x] API ì—”ë“œí¬ì¸íŠ¸ ë™ì‘ í™•ì¸
- [x] ë²„ì „ ê´€ë¦¬ ë¡œì§ ê²€ì¦
- [x] í•˜ìœ„ í˜¸í™˜ì„± í™•ì¸ (YAML fallback)

### í”„ë¡ íŠ¸ì—”ë“œ
- [x] í˜ì´ì§€ ë Œë”ë§ ì„±ê³µ
- [x] API í†µì‹  ì •ìƒ
- [x] ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° ë™ì‘
- [x] Next.js Static Export ë¹Œë“œ ì„±ê³µ
- [x] TypeScript íƒ€ì… ì—ëŸ¬ ì—†ìŒ

---

## ğŸ“ í•™ìŠµ ë‚´ìš©

### ê¸°ìˆ ì  ë„ì „
1. **Next.js Static Export + Dynamic Routes**: `generateStaticParams()` í•„ìˆ˜
2. **PostgreSQL Array íƒ€ì…**: `TEXT[]` íƒ€ì… í™œìš©
3. **íŠ¸ëœì­ì…˜ ì²˜ë¦¬**: BEGIN/COMMIT/ROLLBACK íŒ¨í„´
4. **í•˜ìœ„ í˜¸í™˜ì„± ì„¤ê³„**: DB ìš°ì„  â†’ YAML fallback íŒ¨í„´

### ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤
1. **ë²„ì „ ê´€ë¦¬**: ëª¨ë“  ë³€ê²½ ì‹œ ìƒˆ ë²„ì „ ìƒì„± (Immutable)
2. **ê°ì‚¬ ë¡œê·¸**: ëª¨ë“  ì•¡ì…˜ ìë™ ê¸°ë¡
3. **ì†Œí”„íŠ¸ ì‚­ì œ**: `is_archived` í”Œë˜ê·¸ ì‚¬ìš©
4. **ìºì‹œ ì „ëµ**: ë©”ëª¨ë¦¬ ìºì‹œ + ëª…ì‹œì  ë¦¬ë¡œë“œ API

---

**ì‘ì—… ì™„ë£Œ ì‹œê°**: 2026. 01. 25. 07:40 (KST)
**ë‹¤ìŒ ë‹¨ê³„**: ìŠ¤í…Œì´ì§• ë°°í¬ ë˜ëŠ” Git ì»¤ë°‹
